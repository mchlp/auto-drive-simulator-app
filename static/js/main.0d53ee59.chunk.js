(this["webpackJsonpauto-drive-network-app"]=this["webpackJsonpauto-drive-network-app"]||[]).push([[0],{104:function(e,t){},108:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n.n(o),i=n(4),l=n(18),s=n(8),u=n(112),d=n(115),f=n(114),m=n(9),p=n(10),v=n(13),O=n(31),S=n.n(O),b=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"generateShortUuid",value:function(){return this.shortUuidGenerator.generate()}},{key:"getCoordFromWaypoint",value:function(e,t){return e.startsWith("intersection")?t.intersections[e].coord:e.startsWith("location")?t.locations[e].coord:null}},{key:"getDistanceBetweenArrayCoords",value:function(e,t){for(var n=0,a=0;a<e.length;a++)n+=Math.pow(t[a]-e[a],2);return Math.sqrt(n)}},{key:"initUtils",value:function(t,n,a,r,o){e.canvasProps=t,e.canvasWidth=n,e.canvasHeight=a,e.canvasOffsetLeft=r,e.canvasOffsetTop=o,e.ready=!0}},{key:"mapArrayCoord",value:function(t){return t?t.map(e.mapSingleCoord):null}},{key:"unmapArrayCoord",value:function(t){return t?t.map(e.unmapSingleCoord):null}},{key:"scaleSingleCoord",value:function(t){return t*e.canvasProps.zoom}},{key:"unscaleSingleCoord",value:function(t){return t/e.canvasProps.zoom}},{key:"mapSingleCoord",value:function(t,n){var a=e.scaleSingleCoord(t);return 0===n?a+=e.canvasWidth/2-e.canvasProps.centerX:1===n&&(a+=e.canvasHeight/2-e.canvasProps.centerY),a}},{key:"unmapSingleCoord",value:function(t,n){var a=t;return 0===n?a-=e.canvasWidth/2-e.canvasProps.centerX:1===n&&(a-=e.canvasHeight/2-e.canvasProps.centerY),e.unscaleSingleCoord(a)}}]),e}();b.ready=!1,b.shortUuidGenerator=S()(S.a.constants.flickrBase58);var E={ROAD_DRIVING_SIDE:{LEFT:"left",RIGHT:"right"},VEHICLE_STATE:{SPAWNED:"spawned",DEPARTURE_READY:"departure_ready",EN_ROUTE:"en_route",ARRIVED:"arrived"},ROAD_TYPES:{TYPES:{LOCAL:"LOCAL",MINOR:"MINOR",MAJOR:"MAJOR"},WIDTH:{LOCAL:50,MINOR:60,MAJOR:100}},VEHICLE_DIRECTION:{TOWARDS_START:"towards_start",TOWARDS_END:"towards_end"},DISPLAY:{INTERSECTION_RADIUS:45,LOCATION_RADIUS:30},APP_STATE_LIST:{VIEW_MAP:"view_map",CREATE_MAP:"create_map"}},y=E,g=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"render",value:function(e,t,n){var a=function(n){Object.entries(t.roads).forEach((function(a){a[0];var r=a[1],o=b.mapArrayCoord(b.getCoordFromWaypoint(r.start,t)),c=b.mapArrayCoord(b.getCoordFromWaypoint(r.end,t));if(o&&c)if("pavement"===n)r.type===y.ROAD_TYPES.TYPES.LOCAL?e.lineWidth=b.scaleSingleCoord(y.ROAD_TYPES.WIDTH.LOCAL):r.type===y.ROAD_TYPES.TYPES.MINOR?e.lineWidth=b.scaleSingleCoord(y.ROAD_TYPES.WIDTH.MINOR):r.type===y.ROAD_TYPES.TYPES.MAJOR&&(e.lineWidth=b.scaleSingleCoord(y.ROAD_TYPES.WIDTH.MAJOR)),e.strokeStyle="black",e.lineJoin="round",e.setLineDash([]),e.beginPath(),e.moveTo.apply(e,Object(v.a)(o)),e.lineTo.apply(e,Object(v.a)(c)),e.stroke();else if("center-line"===n){if(e.lineWidth=b.scaleSingleCoord(1),e.strokeStyle="yellow",r.type===y.ROAD_TYPES.TYPES.LOCAL)e.setLineDash([b.scaleSingleCoord(5),b.scaleSingleCoord(5)]),e.beginPath(),e.moveTo.apply(e,Object(v.a)(o)),e.lineTo.apply(e,Object(v.a)(c)),e.stroke();else if(r.type===y.ROAD_TYPES.TYPES.MINOR)e.setLineDash([]),e.beginPath(),e.moveTo.apply(e,Object(v.a)(o)),e.lineTo.apply(e,Object(v.a)(c)),e.stroke();else if(r.type===y.ROAD_TYPES.TYPES.MAJOR){e.setLineDash([]),e.beginPath(),e.moveTo.apply(e,Object(v.a)(o)),e.lineTo.apply(e,Object(v.a)(c)),e.stroke();var i={x:c[0]-o[0],y:c[1]-o[1]},l={x:-i.y/Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)),y:i.x/Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))};e.strokeStyle="white",e.setLineDash([b.scaleSingleCoord(3),b.scaleSingleCoord(5)]),e.beginPath(),e.moveTo(o[0]+b.scaleSingleCoord(25*l.x),o[1]+b.scaleSingleCoord(25*l.y)),e.lineTo(c[0]+b.scaleSingleCoord(25*l.x),c[1]+b.scaleSingleCoord(25*l.y)),e.stroke(),e.beginPath(),e.moveTo(o[0]-b.scaleSingleCoord(25*l.x),o[1]-b.scaleSingleCoord(25*l.y)),e.lineTo(c[0]-b.scaleSingleCoord(25*l.x),c[1]-b.scaleSingleCoord(25*l.y)),e.stroke()}e.lineJoin="round"}}))};a("pavement"),a("center-line")}}]),e}(),h=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"render",value:function(e,t,n){Object.entries(t.locations).forEach((function(t){var a=t[0],r=t[1],o=b.mapArrayCoord(r.coord);e.lineWidth=2,e.strokeStyle="grey",e.fillStyle="#ff0000",e.setLineDash([]),e.beginPath(),e.arc(o[0],o[1],b.scaleSingleCoord(y.DISPLAY.LOCATION_RADIUS),0,2*Math.PI),e.stroke(),e.fill(),n&&(e.font=b.scaleSingleCoord(50)+"px Arial",e.strokeStyle="white",e.strokeWidth=b.scaleSingleCoord(2),e.strokeText(a,o[0],o[1]),e.fillStyle="black",e.fillText(a,o[0],o[1]))}))}}]),e}(),j=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"render",value:function(e,t,n){Object.entries(t.intersections).forEach((function(t){var a=t[0],r=t[1],o=b.mapArrayCoord(r.coord);e.lineWidth=2,e.strokeStyle="grey",e.fillStyle="#00ff00",e.setLineDash([]),e.beginPath(),e.arc(o[0],o[1],b.scaleSingleCoord(y.DISPLAY.INTERSECTION_RADIUS),0,2*Math.PI),e.stroke(),e.fill(),n&&(e.font=b.scaleSingleCoord(50)+"px Arial",e.strokeStyle="white",e.strokeWidth=b.scaleSingleCoord(2),e.strokeText(a,o[0],o[1]),e.fillStyle="black",e.fillText(a,o[0],o[1]))}))}}]),e}(),C=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"render",value:function(e,t,n){Object.entries(t.vehicles).forEach((function(t){var a=t[0],r=t[1],o=b.mapArrayCoord(r.coord);if(e.lineWidth=2,e.strokeStyle="grey",e.fillStyle="blue",e.setLineDash([]),e.beginPath(),e.arc(o[0],o[1],b.scaleSingleCoord(10),0,2*Math.PI),e.stroke(),e.fill(),n){e.lineJoin="round",e.miterLimit=2;var c="".concat(a," | Src: ").concat(r.originId," | Dest: ").concat(r.destinationId);e.font=b.scaleSingleCoord(15)+"px Arial",e.strokeStyle="black",e.strokeWidth=b.scaleSingleCoord(1),e.strokeText(c,o[0],o[1]),e.fillStyle="yellow",e.fillText(c,o[0],o[1])}}))}}]),e}(),T=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"renderStatic",value:function(e,t,n,a){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.clearRect(0,0,n,a),e.fillStyle="#dddddd",e.fillRect(0,0,n,a);var o=new Image;o.src="/logo192.png",o.onload=function(){e.drawImage(o,0,0,50,50)},g.render(e,t,r),h.render(e,t,r),j.render(e,t,r)}},{key:"renderDynamic",value:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.clearRect(0,0,n,a),C.render(e,t,r)}},{key:"renderAll",value:function(e,t,n,a,r,o,c){this.renderStatic(e,n,a,r,c),this.renderDynamic(t,n,a,r,o)}}]),e}();function A(e){var t=e.mapData,n=e.showDynamicLabels,o=e.buildingMap,c=e.showToggleDynamicLabelOption,l=e.setShowToggleDynamicLabelOption,u=Object(a.useRef)(null),d=Object(a.useRef)(null),f=Object(a.useRef)(null),m=Object(a.useState)(window.innerWidth),p=Object(i.a)(m,2),v=p[0],O=p[1],S=Object(a.useState)(window.innerHeight),E=Object(i.a)(S,2),y=E[0],g=E[1],h=Object(a.useState)({centerX:0,centerY:0,zoom:.5}),j=Object(i.a)(h,2),C=j[0],A=j[1];Object(a.useEffect)((function(){g(window.innerHeight),O(window.innerWidth)}),[]);var D=Object(a.useRef)(!1),I=Object(a.useRef)(null),P=function(e){var t=e.key,n=0,a=0;switch(t){case"ArrowUp":a=-50;break;case"ArrowDown":a=50;break;case"ArrowLeft":n=-50;break;case"ArrowRight":n=50}A((function(e){return{centerX:e.centerX+n,centerY:e.centerY+a,zoom:e.zoom}}))};Object(a.useEffect)((function(){return window.addEventListener("keydown",P),function(){window.removeEventListener("keydown",P)}}),[]),Object(a.useEffect)((function(){if(f.current)return f.current.addEventListener("wheel",R,{passive:!1}),function(){f.current.removeEventListener("wheel",R)}}),[f]),Object(a.useEffect)((function(){u&&u.current&&b.initUtils(C,v,y,f.current.offsetLeft,f.current.offsetTop)}),[v,y,C,u]),Object(a.useEffect)((function(){if(t&&u&&u.current&&d&&d.current){var e=u.current,a=d.current,r=e.getContext("2d"),o=a.getContext("2d");T.renderAll(r,o,t,v,y,n,!0)}}),[u,d,C,v,y,n]),Object(a.useEffect)((function(){if(t&&d&&d.current)if(o){var e=u.current,a=d.current,r=e.getContext("2d"),c=a.getContext("2d");T.renderAll(r,c,t,v,y,n,!0)}else{var i=d.current.getContext("2d");T.renderDynamic(i,t,v,y,n)}}),[d,t]);var k=function(e){D.current=!1,I.current=null},w=Object(a.useRef)(null),R=function(e){if(e.preventDefault(),e.stopPropagation(),t){var n=e.pageX,a=e.pageY,r=e.deltaY,o=1;r>0?o=.8:r<0&&(o=1.25),A((function(e){var t=n-u.current.offsetLeft,r=a-u.current.offsetTop-y/2,c=t-v/2+e.centerX,i=r+e.centerY,l=e.zoom*o;return{centerX:e.centerX-c*(1-o),centerY:e.centerY-i*(1-o),zoom:l}}))}return!1};return Object(a.useEffect)((function(){C.zoom<.4?c&&l(!1):c||l(!0)}),[C.zoom]),r.a.createElement("div",{onMouseDown:function(e){e.preventDefault(),t&&(D.current=!0,I.current={x:e.screenX,y:e.screenY})},onMouseUp:k,onMouseLeave:k,onMouseMove:function(e){var t=Date.now();if(D.current&&(!w.current||t-w.current>1e3/30)){w.current=t;var n={x:I.current.x,y:I.current.y},a={x:e.screenX,y:e.screenY};A((function(e){return Object(s.a)(Object(s.a)({},e),{},{centerX:e.centerX-(a.x-n.x),centerY:e.centerY-(a.y-n.y)})})),I.current=a}},ref:f,style:{height:y,width:v,position:"absolute",top:0,left:0,zIndex:-1}},r.a.createElement("canvas",{style:{position:"absolute",zIndex:2},ref:d,width:v,height:y}),r.a.createElement("canvas",{style:{position:"absolute",zIndex:1},ref:u,width:v,height:y}))}function D(e){var t,n=e.componentData;return t=n?r.a.createElement("div",null,r.a.createElement("div",null,"Type: ",n.type),r.a.createElement("div",null,"ID: ",n.id),r.a.createElement("div",null,"Coord: [",n.data.coord[0].toFixed(3),", ",n.data.coord[1].toFixed(3),"]")):r.a.createElement("div",null,"No component selected"),r.a.createElement("div",{style:{fontSize:12}},t)}var I={},P=function(e,t,n,a){for(var r=0,o=Object.entries(t.intersections);r<o.length;r++){var c=o[r];if(!a.includes(c[0])){var i=c[1];if(b.getDistanceBetweenArrayCoords(i.coord,e)<y.DISPLAY.INTERSECTION_RADIUS+n)return{type:"intersection",id:c[0],data:c[1]}}}return null},k=function(e,t,n,a){for(var r=0,o=Object.entries(t.locations);r<o.length;r++){var c=o[r];if(!a.includes(c[0])){var i=c[1];if(b.getDistanceBetweenArrayCoords(i.coord,e)<y.DISPLAY.LOCATION_RADIUS+n)return{type:"location",id:c[0],data:c[1]}}}return null};I.findComponent=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=[P,k],o=0,c=r;o<c.length;o++){var i=c[o],l=i(e,t,n,a);if(l)return l}};var w=I;function R(e){var t,n=e.mapData,o=e.averageDataUpdatesPerSecond,c=Object(a.useRef)([]),i=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=Date.now(),t=0;i.current&&(t=e-i.current),i.current=e,c.current.push(t),c.current.length>100&&c.current.shift()}),[n]);var l=1e3/(c.current.reduce((function(e,t){return e+t}),0)/c.current.length),s={};return t=n?r.a.createElement("div",null,r.a.createElement("div",{style:s},"Map ID: ",n.id),r.a.createElement("div",{style:s},"Total Vehicles: ",Object.keys(n.vehicles).length),r.a.createElement("div",{style:s},"Total Intersections:"," ",Object.keys(n.intersections).length),r.a.createElement("div",{style:s},"Total Locations: ",Object.keys(n.locations).length),r.a.createElement("div",{style:s},"Total Roads: ",Object.keys(n.roads).length),r.a.createElement("div",{style:s},"Avg Updates/Sec:"," ",Math.min(o,l).toFixed(2))):r.a.createElement("div",null,"Map data not loaded."),r.a.createElement("div",{style:{fontSize:12}},t)}var _=n(116),L=n(109),M=n(110),N=n(111);function x(e){var t=e.isOpen,n=e.setIsOpen,a=e.className;return r.a.createElement(_.a,{isOpen:t,toggle:function(){n(!t)},className:a},r.a.createElement(L.a,{toggle:function(){n(!t)}},"Low FPS Detected"),r.a.createElement(M.a,null,"It has been detected at the map is running at a lower than optimal frame rate. It may help to hide the labels by toggling the ",r.a.createElement("code",null,"Toggle Labels")," checkbox"),r.a.createElement(N.a,null,r.a.createElement(u.a,{color:"primary",onClick:function(){n(!t)}},"OK")))}var Y=n(33);function W(e){var t,n=e.sectionName,o=e.children,c=e.openInitial,l=void 0===c||c,s=Object(a.useState)(l),u=Object(i.a)(s,2),d=u[0],f=u[1];return t=d?Y.a:Y.b,r.a.createElement("div",{className:"mx-2 my-2"},r.a.createElement("div",{className:"font-weight-bold",style:{display:"flex",justifyContent:"space-between",alignContent:"center",alignItems:"center"}},n,r.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){f((function(e){return!e}))}},r.a.createElement(t,null))),d&&r.a.createElement("div",null,o))}var U=n(113);function z(e){var t=e.mapData,n={fontSize:10};return r.a.createElement("div",{style:{fontSize:10}},r.a.createElement("div",null,r.a.createElement(U.a,{for:"navigate-origin",className:"font-weight-bold mb-1 mt-2"},"Origin"),r.a.createElement(f.a,{style:n,type:"select",name:"select",id:"navigate-origin"},Object.values(t.locations).map((function(e){return r.a.createElement("option",{style:n},e.id)})))),r.a.createElement("div",null,r.a.createElement(U.a,{for:"navigate-dest",className:"font-weight-bold mb-1 mt-2"},"Destination"),r.a.createElement(f.a,{style:n,type:"select",name:"select",id:"navigate-dest"},Object.values(t.locations).map((function(e){return r.a.createElement("option",{style:n},e.id)})))),r.a.createElement(u.a,{className:"mt-2",color:"primary",style:{fontSize:10}},"Navigate"))}function J(e){var t=e.mapData,n=e.onSelectComponentChange,o=e.onHoverComponentChanged,c=e.onMouseMove,l=e.onMouseDown,s=e.curPointerRadius,d=e.curPointerComponentId,f=e.cursorStyle,m=e.averageDataUpdatesPerSecond,p=e.buildingMap,v=void 0!==p&&p,O=e.curState,S=e.setCurState,E=Object(a.useRef)(null),g=Object(a.useState)(null),h=Object(i.a)(g,2),j=h[0],C=h[1],T=Object(a.useState)(null),I=Object(i.a)(T,2),P=I[0],k=I[1],_=Object(a.useState)(!0),L=Object(i.a)(_,2),M=L[0],N=L[1],Y=Object(a.useState)(!0),U=Object(i.a)(Y,2),J=U[0],X=U[1],H=Object(a.useState)(!1),V=Object(i.a)(H,2),F=V[0],B=V[1],G=Object(a.useState)(!1),q=Object(i.a)(G,2),K=q[0],Q=q[1],Z=function(e){var t=e.pageX,n=e.pageY,a=[t-b.canvasOffsetLeft,n-b.canvasOffsetTop];return b.unmapArrayCoord(a)};Object(a.useEffect)((function(){m<20&&M&&!K&&(B(!0),Q(!0))}),[m,M]);return r.a.createElement("div",null,r.a.createElement(x,{isOpen:F,setIsOpen:B}),r.a.createElement("div",{style:{background:"#ffffffcc",margin:10,display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"space-between",width:300,position:"fixed",borderRadius:5}},r.a.createElement(W,{sectionName:"Selected Component"},r.a.createElement(D,{componentData:P||j})),r.a.createElement(W,{sectionName:"Navigate"},r.a.createElement(z,{mapData:t})),r.a.createElement(W,{sectionName:"Map Stats"},r.a.createElement(R,{mapData:t,averageDataUpdatesPerSecond:m})),r.a.createElement(W,{sectionName:"Menu Settings"},J&&r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",alignContent:"center"},className:"my-1"},r.a.createElement("input",{type:"checkbox",id:"show-lables-chkbox",className:"mr-1",checked:M,onChange:function(e){N(e.target.checked)}}),r.a.createElement("label",{htmlFor:"show-labels-chkbox",className:"m-0",onClick:function(e){N((function(e){return!e}))},style:{userSelect:"none",fontSize:10}},"Toggle Vehicle Labels")),r.a.createElement("div",null,r.a.createElement(u.a,{color:"link",style:{fontSize:10,padding:0},onClick:function(){O===y.APP_STATE_LIST.CREATE_MAP?S(y.APP_STATE_LIST.VIEW_MAP):S(y.APP_STATE_LIST.CREATE_MAP)}},O===y.APP_STATE_LIST.CREATE_MAP?"Switch to View Mode":"Switch to Create Mode")))),r.a.createElement("div",{onMouseMove:function(e){if(E&&E.current&&b.ready){var n=Z(e);c&&c(n);var a=w.findComponent(n,t,s,[d]);(P?P.id:P)!==(a?a.id:a)&&(k(a),o&&o(a))}},onMouseDown:function(e){if(E&&E.current&&b.ready){var t=Z(e);l&&l(t),P&&j!==P&&(C(P),n&&n(P))}},ref:E,style:{cursor:f||(P?"pointer":"move")}},r.a.createElement(A,{mapData:t,showDynamicLabels:M&&J,showToggleDynamicLabelOption:J,setShowToggleDynamicLabelOption:X,buildingMap:v})))}var X=n(32),H="intersection",V="location",F="none",B="road",G="save_map",q="delete";function K(e){var t=e.curState,n=e.setCurState,o=Object(a.useRef)(JSON.parse(localStorage.getItem("saved-map-data"))||X),c=Object(a.useRef)(null),m=Object(a.useState)(null),p=Object(i.a)(m,2),v=p[0],O=p[1],S=Object(a.useState)(null),E=Object(i.a)(S,2),g=E[0],h=E[1],j=Object(a.useState)(null),C=Object(i.a)(j,2),T=C[0],A=C[1],D=Object(a.useState)(null),I=Object(i.a)(D,2),P=(I[0],I[1]),k=Object(a.useState)(X),w=Object(i.a)(k,2),R=w[0],_=w[1],L=Object(a.useState)(F),M=Object(i.a)(L,2),N=M[0],x=M[1],Y=Object(a.useState)(""),W=Object(i.a)(Y,2),U=W[0],z=W[1],K=function(e){"Escape"===e.key&&(x(F),c.current=null)};Object(a.useEffect)((function(){return window.addEventListener("keydown",K),function(){window.removeEventListener("keydown",K)}}),[]);var Q=Object(a.useRef)(Date.now());Object(a.useEffect)((function(){var e=Date.now();e-Q.current>5e3&&(localStorage.setItem("saved-map-data",Z()),Q.current=e)}),[R]);var Z=function(){var e={id:"map_".concat(b.generateShortUuid()),locations:o.current.locations,intersections:o.current.intersections,vehicles:{},roads:o.current.roads};return JSON.stringify(e)},$=function(e){if(e&&e.id){var t=JSON.parse(JSON.stringify(o.current));t.intersections[e.id]&&delete t.intersections[e.id],t.locations[e.id]&&delete t.locations[e.id];for(var n=0,a=Object.keys(o.current.roads);n<a.length;n++){var r=a[n];o.current.roads[r].start!==e.id&&o.current.roads[r].end!==e.id||delete t.roads[r]}o.current=t,c.current=null,_(t)}},ee=0;N===V?ee=y.DISPLAY.LOCATION_RADIUS:N===H&&(ee=y.DISPLAY.INTERSECTION_RADIUS);var te=null;return N===B&&v?te="crosshair":N===q&&(te="no-drop"),r.a.createElement("div",{className:"mt-1"},r.a.createElement("div",null,r.a.createElement(u.a,{color:"primary",className:"m-1",onClick:function(){_(o.current),x(V),c.current=null}},"Add Location"),r.a.createElement(u.a,{color:"primary",onClick:function(){_(o.current),x(H),c.current=null},className:"m-1"},"Add Intersection"),r.a.createElement(u.a,{color:"primary",onClick:function(){_(o.current),x(B),h(y.ROAD_TYPES.TYPES.MAJOR)},className:"m-1"},"Build Major Road"),r.a.createElement(u.a,{color:"primary",onClick:function(){_(o.current),x(B),h(y.ROAD_TYPES.TYPES.MINOR)},className:"m-1"},"Build Minor Road"),r.a.createElement(u.a,{color:"primary",onClick:function(){_(o.current),x(B),h(y.ROAD_TYPES.TYPES.LOCAL)},className:"m-1"},"Build Local Road"),r.a.createElement(u.a,{color:"primary",onClick:function(){_(o.current),x(q),c.current=null},className:"m-1"},"Delete Components"),r.a.createElement(u.a,{color:"primary",onClick:function(){O(null),_(o.current),x(F),c.current=null},className:"m-1"},"Reset Pointer"),r.a.createElement(u.a,{color:"success",onClick:function(){x(G),z(Z())},className:"m-1"},"Save Map")),N===G&&r.a.createElement(d.a,{className:"mt-2"},r.a.createElement("div",{className:"mb-2"},"Copy the map data below to your clipboard."),r.a.createElement(f.a,{type:"text",value:U,readOnly:!0})),r.a.createElement("div",null,r.a.createElement(J,{mapData:R,onMouseMove:function(e){N===H?_((function(t){var n=c.current;return n&&n.includes("intersection")||(n="intersection_".concat(b.generateShortUuid())),c.current=n,Object(s.a)(Object(s.a)({},t),{},{intersections:Object(s.a)(Object(s.a)({},t.intersections),{},Object(l.a)({},n,{id:n,coord:e}))})})):N===V?_((function(t){var n=c.current;return n&&n.includes("location")||(n="location_".concat(b.generateShortUuid())),c.current=n,Object(s.a)(Object(s.a)({},t),{},{locations:Object(s.a)(Object(s.a)({},t.locations),{},Object(l.a)({},n,{id:n,coord:e}))})})):(_(o.current),c.current=null)},onMouseDown:function(e){if(N===H||N===V)T||(o.current=R,c.current=null);else if(N===B){if(T)if(v){var t="road_".concat(b.generateShortUuid()),n=Object(s.a)(Object(s.a)({},o.current),{},{roads:Object(s.a)(Object(s.a)({},o.current.roads),{},Object(l.a)({},t,{id:t,type:g,start:v,end:T.id}))});o.current=n,_(n),O(T.id)}else O(T.id)}else N===q&&T&&$(T)},onHoverComponentChanged:function(e){A(e)},onSelectComponentChange:function(e){P(e)},curPointerRadius:ee,curPointerComponentId:c.current,cursorStyle:te,averageDataUpdatesPerSecond:0,buildingMap:!0,curState:t,setCurState:n})))}var Q=n(54),Z="http://localhost:3001";Z="https://auto-drive-simulator-api.herokuapp.com/";var $=n.n(Q)()(Z);var ee=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(y.APP_STATE_LIST.VIEW_MAP),l=Object(i.a)(c,2),s=l[0],u=l[1],d=Object(a.useRef)([]),f=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=function(e){var t=Date.now(),n=0;f.current&&(n=t-f.current),f.current=t,d.current.push(n),d.current.length>100&&d.current.shift(),o(e)};return $.on("update-map-data",e),function(){$.off("update-map-data",e)}}),[]);var m,p=1e3/(d.current.reduce((function(e,t){return e+t}),0)/d.current.length);return d.current.length<100&&(p=Number.POSITIVE_INFINITY),s===y.APP_STATE_LIST.VIEW_MAP?m=n?r.a.createElement(J,{mapData:n,averageDataUpdatesPerSecond:p,curState:s,setCurState:u}):r.a.createElement("div",null,"Loading map data..."):s===y.APP_STATE_LIST.CREATE_MAP&&(m=r.a.createElement(K,{curState:s,setCurState:u})),r.a.createElement("div",{className:"App"},m)};n(107);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root"))},32:function(e){e.exports=JSON.parse('{"id":"map_8fzBXojVN4DkjwGhs3p3ks","locations":{},"intersections":{"intersection_0":{"id":"intersection_0","coord":[0,0]},"intersection_1":{"id":"intersection_1","coord":[0,1000]}},"vehicles":{},"roads":{"road_0":{"id":"road_0","type":"MAJOR","start":"intersection_0","end":"intersection_1"}}}')},55:function(e,t,n){e.exports=n(108)}},[[55,1,2]]]);
//# sourceMappingURL=main.0d53ee59.chunk.js.map