{"version":3,"sources":["redux/store.js","redux/actions/index.js","redux/reducers/rootReducer.js","utils/Utils.js","../../auto-drive-simulator-api/src/constants.js","renderers/RoadRenderer.js","renderers/LocationRenderer.js","renderers/IntersectionRenderer.js","renderers/VehicleRenderer.js","utils/MapDataHandler.js","renderers/MapRenderer.js","components/Map.jsx","utils/ComponentFinder.js","components/LowFpsModal.jsx","components/MenuSection.jsx","components/MenuSections/SelectedDisplay.jsx","components/MenuSections/NavigateSection.jsx","components/MenuSections/MapSettings.jsx","components/MenuSections/MapStats.jsx","components/MenuSections/BuildSection.jsx","components/Menu.jsx","components/AboutModalButton.jsx","components/MapViewer.jsx","components/MapBuilder.jsx","App.js","index.js"],"names":["store","reduxConstants","VIEW_MAP","CREATE_MAP","ADD_LOCATION","ADD_INTERSECTION","BUILD_MAJOR_ROAD","BUILD_MINOR_ROAD","BUILD_LOCAL_ROAD","DELETE_COMPONENTS","RESET_POINTER","SAVE_MAP","INTERSECTION","LOCATION","NONE","ROAD_SUFFIX","MAJOR_ROAD","MINOR_ROAD","LOCAL_ROAD","DELETE","actionTypes","actionCreators","buildPointerType","type","payload","showAboutModal","followCurTripVehicle","canvasOffset","zoomFactor","zoomOffsetFromViewCentre","canvasPropsDiff","canvasProps","canvasDimensions","curMode","selectedComponent","hoveredComponent","showDynamicLabels","showStaticLabels","showToggleDynamicLabels","showFpsWarning","curTripVehicleId","mapDataLoaded","avgUpdatesPerSecond","avgRendersPerSecond","INITIAL_STATE","averageUpdatesPerSecond","Number","POSITIVE_INFINITY","averageRendersPerSecond","APP_MODE_LIST","curBuildPointerType","BUILD_POINTER_TYPE","showLabels","dynamic","static","showLowFpsWarning","shownLowFpsWarning","width","height","centerX","centerY","zoom","left","top","rootReducer","curState","action","zoomCenterInCanvas","x","y","getStore","Utils","this","shortUuidGenerator","generate","getState","right","bottom","canvasCoordinateArray","radius","canvasCutoffs","getCanvasViewCutoffs","withinLeft","withinRight","withinTop","withinBottom","waypointName","mapData","startsWith","intersections","coord","locations","arrayCoord1","arrayCoord2","squareSum","i","length","Math","pow","sqrt","arrayCoord","map","mapSingleCoord","unmapSingleCoord","singleCoord","index","scaledCoord","scaleSingleCoord","unscaledCoord","unscaleSingleCoord","shortUuid","constants","flickrBase58","LEFT","RIGHT","SPAWNED","DEPARTURE_READY","EN_ROUTE","ARRIVED","TYPES","LOCAL","MINOR","MAJOR","WIDTH","TOWARDS_START","TOWARDS_END","INTERSECTION_RADIUS","LOCATION_RADIUS","VEHICLE_RADIUS","LOCATION_NAME_CONFIG","dictionaries","names","colors","separator","style","getUniqueLocationName","locationNameArr","uniqueNamesGenerator","split","join","RoadRenderer","ctx","drawRoadLines","mode","Object","entries","roads","forEach","roadEntry","roadData","startCoord","mapArrayCoord","getCoordFromWaypoint","start","endCoord","end","ROAD_TYPES","lineWidth","strokeStyle","lineJoin","setLineDash","beginPath","moveTo","lineTo","stroke","roadSlope","roadPerpSlopeNormalized","LocationRenderer","locationEntry","locationData","checkCoordinateInCanvasView","DISPLAY","fillStyle","arc","PI","fill","font","strokeWidth","strokeText","name","fillText","IntersectionRenderer","intersectionEntry","intersectionId","intersectionData","VehicleRenderer","vehicles","vehicleEntry","vehicleId","vehicleData","miterLimit","text","origin","destination","MapDataHandler","lastUpdateTime","performance","now","lastReduxUpdateTime","updateMapDataListener","data","manualUpdate","dispatch","setMapDataLoaded","curVehicleId","coords","setCanvasProps","setFollowCurTripVehicle","setCurTripVehicleId","COMPLETED_TRIP_VEHICLE_ID","lastUpdateTimeElapsed","lastUpdateTimeElapsedList","push","shift","averageUpdateTimeElapsed","reduce","a","b","setAverageUpdatesPerSecond","init","socket","on","cleanup","off","updateMapData","MapRenderer","staticCanvas","getMapData","getShowLabels","canvasWidth","canvasHeight","staticCtx","getContext","clearRect","fillRect","render","dynamicCanvas","dynamicCtx","getCurTripVehicleId","statisCanvas","_renderStatic","_renderDynamic","lastRenderTimeElapsed","lastRenderTime","lastRenderTimeElapsedList","setAverageRendersPerSecond","connect","state","mapLoaded","staticCanvasRef","useRef","dynamicCanvasRef","canvasContainerRef","useEffect","onWindowResize","setCanvasDimensions","window","innerHeight","innerWidth","addEventListener","removeEventListener","dragging","lastDragCoord","keyDownHandler","event","deltaX","deltaY","key","setCanvasPropsDiff","onZoom","useCallback","preventDefault","stopPropagation","pageX","pageY","curZoomFactor","setCanvasPropsZoom","zoomCenterInCanvasView","current","offsetLeft","offsetTop","setCanvasOffset","curCanvasContainerRef","passive","curWindowRequestAnimationFrame","requestAnimationFrame","renderMap","renderAll","cancelAnimationFrame","onDragEnd","lastDragEvent","setShowToggleDynamicLabels","onMouseDown","screenX","screenY","onMouseUp","onMouseLeave","onMouseMove","lastCoord","curCoord","ref","position","zIndex","overflow","backgroundColor","display","alignContent","alignItems","justifyContent","flexDirection","className","Spinner","color","size","ComponetFinder","intersectionFinder","mapCoordinates","pointerRadius","excludeIdList","includes","getDistanceBetweenArrayCoords","id","locationFinder","findComponent","finderFuncs","func","component","LowFpsModal","isOpen","setIsOpen","Modal","toggle","ModalHeader","ModalBody","ModalFooter","Button","onClick","MenuSection","IconClass","sectionName","children","openInitial","useState","showChildren","setShowChildren","AiFillMinusSquare","AiFillPlusSquare","cursor","oldShowChildren","Content","updateLocationName","editingName","setEditingName","newName","setNewName","componentData","Form","inline","onSubmit","e","Input","fontSize","autoFocus","onBlur","onChange","target","value","toFixed","curTripVehicleData","setCurTripVehicleData","startTripResListener","startTripRes","locationList","values","sort","selectOptionStyle","checked","htmlFor","userSelect","Alert","Label","for","location","startWaypointId","endWaypointId","document","getElementById","emit","originId","destinationId","setShowDynamicLabels","padding","setCurMode","statRowStyle","keys","buildStatusContent","buildActionHandler","buildSectionButtonStyles","outline","BUILD_ACTIONS","background","margin","flexWrap","borderRadius","open","setShowAboutModal","AboutModal","src","process","alt","href","title","curPointerRadius","curPointerComponentId","cursorStyle","containerRef","getMapCoordinatesFromMouseEvent","canvasCoordinates","unmapArrayCoord","setShowFpsWarning","curHoveredComponent","ComponentFinder","setHoveredComponent","button","setSelectedComponent","onContextMenu","prevSavedMapData","JSON","parse","localStorage","getItem","rawMapData","roadStartWaypointId","setRoadStartWaypointId","roadType","setRoadType","console","log","setCurBuildPointerType","interval","setInterval","setItem","stringify","getSerializedMap","clearInterval","generateShortUuid","deleteComponent","newMapData","roadId","buildAction","serializedMap","dataExportStr","encodeURIComponent","downloadAnchorNode","createElement","setAttribute","body","appendChild","click","remove","saveMap","nextIntersectionId","nextLocationId","nextLocationName","newLocation","eventButton","nextRoadId","locationId","newLocationName","disconnect","socketUrl","io","ReactDOM","StrictMode","createStore","composeWithDevTools","applyMiddleware","thunk"],"mappings":"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","file":"static/js/main.0c45715d.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers/rootReducer';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nlet store;\n\nfunction configureStore() {\n    store = createStore(\n        rootReducer,\n        composeWithDevTools(applyMiddleware(thunk))\n    );\n    return store;\n}\n\nfunction getStore() {\n    return store;\n}\n\nexport { configureStore, getStore };\n","const reduxConstants = {};\nreduxConstants.APP_MODE_LIST = {\n    VIEW_MAP: 'view_map',\n    CREATE_MAP: 'create_map',\n};\n\nreduxConstants.COMPLETED_TRIP_VEHICLE_ID = '__trip_completed__';\n\nreduxConstants.BUILD_ACTIONS = {\n    ADD_LOCATION: 'ADD_LOCATION',\n    ADD_INTERSECTION: 'ADD_INTERSECTION',\n    BUILD_MAJOR_ROAD: 'BUILD_MAJOR_ROAD',\n    BUILD_MINOR_ROAD: 'BUILD_MINOR_ROAD',\n    BUILD_LOCAL_ROAD: 'BUILD_LOCAL_ROAD',\n    DELETE_COMPONENTS: 'DELETE_COMPONENTS',\n    RESET_POINTER: 'RESET_POINTER',\n    SAVE_MAP: 'SAVE_MAP',\n};\n\nreduxConstants.BUILD_POINTER_TYPE = {\n    INTERSECTION: 'intersection',\n    LOCATION: 'location',\n    NONE: 'none',\n    ROAD_SUFFIX: '_road',\n    MAJOR_ROAD: 'major_road',\n    MINOR_ROAD: 'minor_road',\n    LOCAL_ROAD: 'local_road',\n    DELETE: 'delete',\n};\n\nconst actionTypes = {\n    UPDATE_MAP_DATA_LOADED: 'UPDATE_MAP_DATA_LOADED',\n    UPDATE_AVERAGE_RENDERS_PER_SECOND: 'UPDATE_AVERAGE_RENDERS_PER_SECOND',\n    UPDATE_AVERAGE_UPDATES_PER_SECOND: 'UPDATE_AVERAGE_UPDATES_PER_SECOND',\n    UPDATE_CUR_MODE: 'UPDATE_CUR_MODE',\n    UPDATE_CUR_BUILD_POINTER_TYPE: 'UPDATE_CUR_BUILD_POINTER_TYPE',\n    UPDATE_SELECTED_COMPONENT: 'UPDATE_SELECTED_COMPONENT',\n    UPDATE_HOVERED_COMPONENT: 'UPDATE_HOVERED_COMPONENT',\n    UPDATE_SHOW_DYNAMIC_LABELS: 'UPDATE_SHOW_DYNAMIC_LABELS',\n    UPDATE_SHOW_STATIC_LABELS: 'UPDATE_SHOW_STATIC_LABELS',\n    UPDATE_SHOW_TOGGLE_DYNAMIC_LABELS: 'UPDATE_SHOW_TOGGLE_DYNAMIC_LABELS',\n    UPDATE_SHOW_FPS_WARNING: 'UPDATE_SHOW_FPS_WARNING',\n    UPDATE_SHOW_ABOUT_MODAL: 'UPDATE_SHOW_ABOUT_MODAL',\n    UPDATE_CUR_TRIP_VEHICLE_ID: 'UPDATE_CUR_TRIP_VEHICLE_ID',\n    UPDATE_FOLLOW_CUR_TRIP_VEHICLE: 'UPDATE_FOLLOW_CUR_TRIP_VEHICLE',\n    UPDATE_CANVAS_DIMENSIONS: 'UPDATE_CANVAS_DIMENSIONS',\n    UPDATE_CANVAS_PROPS_BY_DIFF: 'UPDATE_CANVAS_PROPS_BY_DIFF',\n    UPDATE_CANVAS_PROPS: 'UPDATE_CANVAS_PROPS',\n    UPDATE_CANVAS_PROPS_BY_ZOOM_FACTOR: 'UPDATE_CANVAS_PROPS_BY_ZOOM_FACTOR',\n    UPDATE_CANVAS_OFFSET: 'UPDATE_CANVAS_OFFSET',\n};\n\nconst actionCreators = {};\n\nactionCreators.setCurBuildPointerType = (buildPointerType) => ({\n    type: actionTypes.UPDATE_CUR_BUILD_POINTER_TYPE,\n    payload: buildPointerType,\n});\n\nactionCreators.setShowAboutModal = (showAboutModal) => ({\n    type: actionTypes.UPDATE_SHOW_ABOUT_MODAL,\n    payload: showAboutModal,\n});\n\nactionCreators.setFollowCurTripVehicle = (followCurTripVehicle) => ({\n    type: actionTypes.UPDATE_FOLLOW_CUR_TRIP_VEHICLE,\n    payload: followCurTripVehicle,\n});\n\nactionCreators.setCanvasOffset = (canvasOffset) => ({\n    type: actionTypes.UPDATE_CANVAS_OFFSET,\n    payload: canvasOffset,\n});\n\nactionCreators.setCanvasPropsZoom = (zoomFactor, zoomOffsetFromViewCentre) => ({\n    type: actionTypes.UPDATE_CANVAS_PROPS_BY_ZOOM_FACTOR,\n    payload: { zoomOffsetFromViewCentre, zoomFactor },\n});\n\nactionCreators.setCanvasPropsDiff = (canvasPropsDiff) => ({\n    type: actionTypes.UPDATE_CANVAS_PROPS_BY_DIFF,\n    payload: canvasPropsDiff,\n});\n\nactionCreators.setCanvasProps = (canvasProps) => ({\n    type: actionTypes.UPDATE_CANVAS_PROPS,\n    payload: canvasProps,\n});\n\nactionCreators.setCanvasDimensions = (canvasDimensions) => ({\n    type: actionTypes.UPDATE_CANVAS_DIMENSIONS,\n    payload: canvasDimensions,\n});\n\nactionCreators.setCurMode = (curMode) => ({\n    type: actionTypes.UPDATE_CUR_MODE,\n    payload: curMode,\n});\n\nactionCreators.setSelectedComponent = (selectedComponent) => ({\n    type: actionTypes.UPDATE_SELECTED_COMPONENT,\n    payload: selectedComponent,\n});\n\nactionCreators.setHoveredComponent = (hoveredComponent) => ({\n    type: actionTypes.UPDATE_HOVERED_COMPONENT,\n    payload: hoveredComponent,\n});\n\nactionCreators.setShowDynamicLabels = (showDynamicLabels) => ({\n    type: actionTypes.UPDATE_SHOW_DYNAMIC_LABELS,\n    payload: showDynamicLabels,\n});\n\nactionCreators.setShowStaticLabels = (showStaticLabels) => ({\n    type: actionTypes.UPDATE_SHOW_STATIC_LABELS,\n    payload: showStaticLabels,\n});\n\nactionCreators.setShowToggleDynamicLabels = (showToggleDynamicLabels) => ({\n    type: actionTypes.UPDATE_SHOW_TOGGLE_DYNAMIC_LABELS,\n    payload: showToggleDynamicLabels,\n});\n\nactionCreators.setShowFpsWarning = (showFpsWarning) => ({\n    type: actionTypes.UPDATE_SHOW_FPS_WARNING,\n    payload: showFpsWarning,\n});\n\nactionCreators.setCurTripVehicleId = (curTripVehicleId) => ({\n    type: actionTypes.UPDATE_CUR_TRIP_VEHICLE_ID,\n    payload: curTripVehicleId,\n});\n\nactionCreators.setMapDataLoaded = (mapDataLoaded) => ({\n    type: actionTypes.UPDATE_MAP_DATA_LOADED,\n    payload: mapDataLoaded,\n});\n\nactionCreators.setAverageUpdatesPerSecond = (avgUpdatesPerSecond) => ({\n    type: actionTypes.UPDATE_AVERAGE_UPDATES_PER_SECOND,\n    payload: avgUpdatesPerSecond,\n});\n\nactionCreators.setAverageRendersPerSecond = (avgRendersPerSecond) => ({\n    type: actionTypes.UPDATE_AVERAGE_RENDERS_PER_SECOND,\n    payload: avgRendersPerSecond,\n});\n\nexport { actionCreators, reduxConstants, actionTypes };\n","import { reduxConstants, actionTypes, actionCreators } from '../actions';\n\nconst INITIAL_STATE = {\n    mapDataLoaded: false,\n    averageUpdatesPerSecond: Number.POSITIVE_INFINITY,\n    averageRendersPerSecond: Number.POSITIVE_INFINITY,\n    curMode: reduxConstants.APP_MODE_LIST.VIEW_MAP,\n    curBuildPointerType: reduxConstants.BUILD_POINTER_TYPE.NONE,\n    selectedComponent: null,\n    hoveredComponent: null,\n    showLabels: {\n        dynamic: true,\n        static: true,\n    },\n    curTripVehicleId: null,\n    followCurTripVehicle: false,\n    showToggleDynamicLabels: true,\n    showLowFpsWarning: false,\n    shownLowFpsWarning: false,\n    showAboutModal: true,\n    canvasDimensions: {\n        width: 0,\n        height: 0,\n    },\n    canvasProps: {\n        centerX: 0,\n        centerY: 0,\n        zoom: 0.5,\n    },\n    canvasOffset: {\n        left: 0,\n        top: 0,\n    },\n};\n\nconst rootReducer = (curState = INITIAL_STATE, action) => {\n    switch (action.type) {\n        case actionTypes.UPDATE_CUR_BUILD_POINTER_TYPE: {\n            return {\n                ...curState,\n                curBuildPointerType: action.payload,\n            };\n        }\n        case actionTypes.UPDATE_SHOW_ABOUT_MODAL: {\n            return {\n                ...curState,\n                showAboutModal: action.payload,\n            };\n        }\n        case actionTypes.UPDATE_FOLLOW_CUR_TRIP_VEHICLE: {\n            return {\n                ...curState,\n                followCurTripVehicle: action.payload,\n                canvasProps: {\n                    ...curState.canvasProps,\n                    zoom: action.payload ? 1 : curState.canvasProps.zoom,\n                },\n            };\n        }\n        case actionTypes.UPDATE_CANVAS_OFFSET: {\n            return {\n                ...curState,\n                canvasOffset: {\n                    ...curState.canvasOffset,\n                    ...action.payload,\n                },\n            };\n        }\n        case actionTypes.UPDATE_AVERAGE_RENDERS_PER_SECOND: {\n            return {\n                ...curState,\n                averageRendersPerSecond: action.payload,\n            };\n        }\n        case actionTypes.UPDATE_AVERAGE_UPDATES_PER_SECOND: {\n            return {\n                ...curState,\n                averageUpdatesPerSecond: action.payload,\n            };\n        }\n        case actionTypes.UPDATE_MAP_DATA_LOADED: {\n            return {\n                ...curState,\n                mapDataLoaded: action.payload,\n            };\n        }\n        case actionTypes.UPDATE_CANVAS_PROPS_BY_ZOOM_FACTOR: {\n            const { zoomOffsetFromViewCentre, zoomFactor } = action.payload;\n            const zoomCenterInCanvas = {\n                x: zoomOffsetFromViewCentre.x + curState.canvasProps.centerX,\n                y: zoomOffsetFromViewCentre.y + curState.canvasProps.centerY,\n            };\n\n            return {\n                ...curState,\n                canvasProps: {\n                    centerX:\n                        curState.canvasProps.centerX -\n                        zoomCenterInCanvas.x * (1 - zoomFactor),\n                    centerY:\n                        curState.canvasProps.centerY -\n                        zoomCenterInCanvas.y * (1 - zoomFactor),\n                    zoom: curState.canvasProps.zoom * zoomFactor,\n                },\n            };\n        }\n        case actionTypes.UPDATE_CANVAS_PROPS_BY_DIFF: {\n            return {\n                ...curState,\n                canvasProps: {\n                    centerX: action.payload.centerX\n                        ? curState.canvasProps.centerX + action.payload.centerX\n                        : curState.canvasProps.centerX,\n                    centerY: action.payload.centerY\n                        ? curState.canvasProps.centerY + action.payload.centerY\n                        : curState.canvasProps.centerY,\n                    zoom: action.payload.zoom\n                        ? curState.canvasProps.zoom * action.payload.zoom\n                        : curState.canvasProps.zoom,\n                },\n            };\n        }\n        case actionTypes.UPDATE_CANVAS_PROPS: {\n            return {\n                ...curState,\n                canvasProps: {\n                    ...curState.canvasProps,\n                    ...action.payload,\n                },\n            };\n        }\n        case actionTypes.UPDATE_CANVAS_DIMENSIONS:\n            return {\n                ...curState,\n                canvasDimensions: {\n                    ...curState.canvasDimensions,\n                    ...action.payload,\n                },\n            };\n        case actionTypes.UPDATE_CUR_MODE:\n            return {\n                ...curState,\n                curMode: action.payload,\n                selectedComponent: null,\n                hoveredComponent: null,\n                mapDataLoaded:\n                    action.payload === reduxConstants.APP_MODE_LIST.CREATE_MAP,\n            };\n        case actionTypes.UPDATE_SELECTED_COMPONENT:\n            return {\n                ...curState,\n                selectedComponent: action.payload,\n            };\n        case actionTypes.UPDATE_HOVERED_COMPONENT:\n            return {\n                ...curState,\n                hoveredComponent: action.payload,\n            };\n        case actionTypes.UPDATE_SHOW_DYNAMIC_LABELS:\n            return {\n                ...curState,\n                showLabels: {\n                    ...curState.showLabels,\n                    dynamic: action.payload,\n                },\n            };\n        case actionTypes.UPDATE_SHOW_STATIC_LABELS: {\n            return {\n                ...curState,\n                showLabels: {\n                    ...curState.showLabels,\n                    static: action.payload,\n                },\n            };\n        }\n        case actionTypes.UPDATE_SHOW_TOGGLE_DYNAMIC_LABELS: {\n            return {\n                ...curState,\n                showToggleDynamicLabels: action.payload,\n            };\n        }\n        case actionTypes.UPDATE_SHOW_FPS_WARNING: {\n            if (action.payload && !curState.shownLowFpsWarning) {\n                return {\n                    ...curState,\n                    showLowFpsWarning: true,\n                    shownLowFpsWarning: true,\n                };\n            } else {\n                return {\n                    ...curState,\n                    showLowFpsWarning: false,\n                };\n            }\n        }\n        case actionTypes.UPDATE_CUR_TRIP_VEHICLE_ID: {\n            return {\n                ...curState,\n                curTripVehicleId: action.payload,\n            };\n        }\n        default:\n            return curState;\n    }\n};\n\nexport default rootReducer;\n","import shortUuid from 'short-uuid';\nimport { getStore } from '../redux/store';\nexport default class Utils {\n    static shortUuidGenerator = shortUuid(shortUuid.constants.flickrBase58);\n\n    static generateShortUuid() {\n        return this.shortUuidGenerator.generate();\n    }\n\n    static getCanvasViewCutoffs() {\n        const { canvasDimensions } = getStore().getState();\n        const cutoffs = {\n            left: 0,\n            right: canvasDimensions.width,\n            top: 0,\n            bottom: canvasDimensions.height,\n        };\n        return cutoffs;\n    }\n\n    static checkCoordinateInCanvasView(canvasCoordinateArray, radius = 0) {\n        // console.log(canvasCoordinateArray);\n        const canvasCutoffs = this.getCanvasViewCutoffs();\n        const withinLeft =\n            canvasCoordinateArray[0] + radius / 2 >= canvasCutoffs.left;\n        const withinRight =\n            canvasCoordinateArray[0] - radius / 2 <= canvasCutoffs.right;\n        const withinTop =\n            canvasCoordinateArray[1] + radius / 2 >= canvasCutoffs.top;\n        const withinBottom =\n            canvasCoordinateArray[1] - radius / 2 <= canvasCutoffs.bottom;\n        return withinLeft && withinRight && withinTop && withinBottom;\n    }\n\n    static getCoordFromWaypoint(waypointName, mapData) {\n        if (waypointName.startsWith('intersection')) {\n            return mapData.intersections[waypointName].coord;\n        } else if (waypointName.startsWith('location')) {\n            return mapData.locations[waypointName].coord;\n        }\n        return null;\n    }\n\n    static getDistanceBetweenArrayCoords(arrayCoord1, arrayCoord2) {\n        let squareSum = 0;\n        for (let i = 0; i < arrayCoord1.length; i++) {\n            squareSum += Math.pow(arrayCoord2[i] - arrayCoord1[i], 2);\n        }\n        return Math.sqrt(squareSum);\n    }\n\n    static mapArrayCoord(arrayCoord) {\n        if (arrayCoord) {\n            return arrayCoord.map(Utils.mapSingleCoord);\n        }\n        return null;\n    }\n\n    static unmapArrayCoord(arrayCoord) {\n        if (arrayCoord) {\n            return arrayCoord.map(Utils.unmapSingleCoord);\n        }\n        return null;\n    }\n\n    static scaleSingleCoord(singleCoord) {\n        const canvasProps = getStore().getState().canvasProps;\n        return singleCoord * canvasProps.zoom;\n    }\n\n    static unscaleSingleCoord(singleCoord) {\n        const canvasProps = getStore().getState().canvasProps;\n        return singleCoord / canvasProps.zoom;\n    }\n\n    static mapSingleCoord(singleCoord, index) {\n        let scaledCoord = Utils.scaleSingleCoord(singleCoord);\n        const { canvasDimensions, canvasProps } = getStore().getState();\n        if (index === 0) {\n            scaledCoord += canvasDimensions.width / 2 - canvasProps.centerX;\n        } else if (index === 1) {\n            scaledCoord += canvasDimensions.height / 2 - canvasProps.centerY;\n        }\n        return scaledCoord;\n    }\n\n    static unmapSingleCoord(singleCoord, index) {\n        let unscaledCoord = singleCoord;\n        const { canvasDimensions, canvasProps } = getStore().getState();\n        if (index === 0) {\n            unscaledCoord -= canvasDimensions.width / 2 - canvasProps.centerX;\n        } else if (index === 1) {\n            unscaledCoord -= canvasDimensions.height / 2 - canvasProps.centerY;\n        }\n        return Utils.unscaleSingleCoord(unscaledCoord);\n    }\n}\n","import { names, colors, uniqueNamesGenerator } from 'unique-names-generator';\n\nconst constants = {};\n\nconstants.ROAD_DRIVING_SIDE = {\n    LEFT: 'left',\n    RIGHT: 'right',\n};\n\nconstants.VEHICLE_STATE = {\n    SPAWNED: 'spawned',\n    DEPARTURE_READY: 'departure_ready',\n    EN_ROUTE: 'en_route',\n    ARRIVED: 'arrived',\n};\n\nconstants.ROAD_TYPES = {\n    TYPES: {\n        LOCAL: 'LOCAL',\n        MINOR: 'MINOR',\n        MAJOR: 'MAJOR',\n    },\n    WIDTH: {\n        LOCAL: 50,\n        MINOR: 60,\n        MAJOR: 100,\n    },\n};\n\nconstants.VEHICLE_DIRECTION = {\n    TOWARDS_START: 'towards_start',\n    TOWARDS_END: 'towards_end',\n};\n\nconstants.DISPLAY = {\n    INTERSECTION_RADIUS: 45,\n    LOCATION_RADIUS: 30,\n    VEHICLE_RADIUS: 10,\n};\n\nconst LOCATION_NAME_TYPES_LIST = [\n    'House',\n    'Cottage',\n    'Barn',\n    'Townhouse',\n    'Apartment',\n    'Condo',\n    'Bungalow',\n    'Shop',\n    'Mall',\n    'Hotel',\n    'Cinema',\n    'Warehouse',\n    'Office',\n    'Laboratory',\n    'Museum',\n    'Library',\n    'Gym',\n];\n\nconst LOCATION_NAME_CONFIG = {\n    dictionaries: [names, colors, LOCATION_NAME_TYPES_LIST],\n    separator: '_',\n    style: 'capital',\n};\n\nconstants.getUniqueLocationName = () => {\n    const rawLocationName = uniqueNamesGenerator(LOCATION_NAME_CONFIG);\n    const locationNameArr = rawLocationName.split('_');\n    locationNameArr[0] += \"'s\";\n    return locationNameArr.join(' ');\n};\n\nexport default constants;\n","import Utils from '../utils/Utils';\nimport constants from '../constants';\n\nexport default class RoadRenderer {\n    static render(ctx, mapData, showLabels) {\n        const drawRoadLines = (mode) => {\n            Object.entries(mapData.roads).forEach((roadEntry) => {\n                const roadId = roadEntry[0];\n                const roadData = roadEntry[1];\n\n                const startCoord = Utils.mapArrayCoord(\n                    Utils.getCoordFromWaypoint(roadData.start, mapData)\n                );\n                const endCoord = Utils.mapArrayCoord(\n                    Utils.getCoordFromWaypoint(roadData.end, mapData)\n                );\n\n                if (startCoord && endCoord) {\n                    if (mode === 'pavement') {\n                        if (\n                            roadData.type === constants.ROAD_TYPES.TYPES.LOCAL\n                        ) {\n                            ctx.lineWidth = Utils.scaleSingleCoord(\n                                constants.ROAD_TYPES.WIDTH.LOCAL\n                            );\n                        } else if (\n                            roadData.type === constants.ROAD_TYPES.TYPES.MINOR\n                        ) {\n                            ctx.lineWidth = Utils.scaleSingleCoord(\n                                constants.ROAD_TYPES.WIDTH.MINOR\n                            );\n                        } else if (\n                            roadData.type === constants.ROAD_TYPES.TYPES.MAJOR\n                        ) {\n                            ctx.lineWidth = Utils.scaleSingleCoord(\n                                constants.ROAD_TYPES.WIDTH.MAJOR\n                            );\n                        }\n\n                        ctx.strokeStyle = 'black';\n                        ctx.lineJoin = 'round';\n                        ctx.setLineDash([]);\n                        ctx.beginPath();\n                        ctx.moveTo(...startCoord);\n                        ctx.lineTo(...endCoord);\n                        ctx.stroke();\n                    } else if (mode === 'center-line') {\n                        ctx.lineWidth = Utils.scaleSingleCoord(1);\n                        ctx.strokeStyle = 'yellow';\n                        if (\n                            roadData.type === constants.ROAD_TYPES.TYPES.LOCAL\n                        ) {\n                            ctx.setLineDash([\n                                Utils.scaleSingleCoord(5),\n                                Utils.scaleSingleCoord(5),\n                            ]);\n                            ctx.beginPath();\n                            ctx.moveTo(...startCoord);\n                            ctx.lineTo(...endCoord);\n                            ctx.stroke();\n                        } else if (\n                            roadData.type === constants.ROAD_TYPES.TYPES.MINOR\n                        ) {\n                            ctx.setLineDash([]);\n                            ctx.beginPath();\n                            ctx.moveTo(...startCoord);\n                            ctx.lineTo(...endCoord);\n                            ctx.stroke();\n                        } else if (\n                            roadData.type === constants.ROAD_TYPES.TYPES.MAJOR\n                        ) {\n                            ctx.setLineDash([]);\n                            ctx.beginPath();\n                            ctx.moveTo(...startCoord);\n                            ctx.lineTo(...endCoord);\n                            ctx.stroke();\n\n                            const roadSlope = {\n                                x: endCoord[0] - startCoord[0],\n                                y: endCoord[1] - startCoord[1],\n                            };\n\n                            const roadPerpSlopeNormalized = {\n                                x:\n                                    -roadSlope.y /\n                                    Math.sqrt(\n                                        Math.pow(roadSlope.x, 2) +\n                                            Math.pow(roadSlope.y, 2)\n                                    ),\n                                y:\n                                    roadSlope.x /\n                                    Math.sqrt(\n                                        Math.pow(roadSlope.x, 2) +\n                                            Math.pow(roadSlope.y, 2)\n                                    ),\n                            };\n\n                            ctx.strokeStyle = 'white';\n                            ctx.setLineDash([\n                                Utils.scaleSingleCoord(3),\n                                Utils.scaleSingleCoord(5),\n                            ]);\n\n                            // draw left lane lines\n                            ctx.beginPath();\n                            ctx.moveTo(\n                                startCoord[0] +\n                                    Utils.scaleSingleCoord(\n                                        roadPerpSlopeNormalized.x * 25\n                                    ),\n                                startCoord[1] +\n                                    Utils.scaleSingleCoord(\n                                        roadPerpSlopeNormalized.y * 25\n                                    )\n                            );\n                            ctx.lineTo(\n                                endCoord[0] +\n                                    Utils.scaleSingleCoord(\n                                        roadPerpSlopeNormalized.x * 25\n                                    ),\n                                endCoord[1] +\n                                    Utils.scaleSingleCoord(\n                                        roadPerpSlopeNormalized.y * 25\n                                    )\n                            );\n                            ctx.stroke();\n\n                            // draw right lane lines\n                            ctx.beginPath();\n                            ctx.moveTo(\n                                startCoord[0] -\n                                    Utils.scaleSingleCoord(\n                                        roadPerpSlopeNormalized.x * 25\n                                    ),\n                                startCoord[1] -\n                                    Utils.scaleSingleCoord(\n                                        roadPerpSlopeNormalized.y * 25\n                                    )\n                            );\n                            ctx.lineTo(\n                                endCoord[0] -\n                                    Utils.scaleSingleCoord(\n                                        roadPerpSlopeNormalized.x * 25\n                                    ),\n                                endCoord[1] -\n                                    Utils.scaleSingleCoord(\n                                        roadPerpSlopeNormalized.y * 25\n                                    )\n                            );\n                            ctx.stroke();\n                        }\n                        ctx.lineJoin = 'round';\n                    }\n                }\n            });\n        };\n\n        drawRoadLines('pavement');\n        drawRoadLines('center-line');\n    }\n}\n","import Utils from '../utils/Utils';\nimport constants from '../constants';\n\nexport default class LocationRenderer {\n    static render(ctx, mapData, showLabels) {\n        Object.entries(mapData.locations).forEach((locationEntry) => {\n            const locationId = locationEntry[0];\n            const locationData = locationEntry[1];\n\n            const coord = Utils.mapArrayCoord(locationData.coord);\n            if (\n                Utils.checkCoordinateInCanvasView(\n                    coord,\n                    constants.DISPLAY.LOCATION_RADIUS\n                )\n            ) {\n                ctx.lineWidth = 2;\n                ctx.strokeStyle = 'grey';\n                ctx.fillStyle = '#ff0000';\n                ctx.setLineDash([]);\n\n                ctx.beginPath();\n                ctx.arc(\n                    coord[0],\n                    coord[1],\n                    Utils.scaleSingleCoord(constants.DISPLAY.LOCATION_RADIUS),\n                    0,\n                    2 * Math.PI\n                );\n                ctx.stroke();\n                ctx.fill();\n\n                if (showLabels) {\n                    ctx.font = Utils.scaleSingleCoord(25) + 'px Roboto';\n                    ctx.strokeStyle = 'white';\n                    ctx.strokeWidth = Utils.scaleSingleCoord(2);\n                    ctx.strokeText(locationData.name, coord[0], coord[1]);\n                    ctx.fillStyle = 'black';\n                    ctx.fillText(locationData.name, coord[0], coord[1]);\n                }\n            }\n        });\n    }\n}\n","import Utils from '../utils/Utils';\nimport constants from '../constants';\n\nexport default class IntersectionRenderer {\n    static render(ctx, mapData, showLabels) {\n        Object.entries(mapData.intersections).forEach((intersectionEntry) => {\n            const intersectionId = intersectionEntry[0];\n            const intersectionData = intersectionEntry[1];\n\n            const coord = Utils.mapArrayCoord(intersectionData.coord);\n            if (\n                Utils.checkCoordinateInCanvasView(\n                    coord,\n                    constants.DISPLAY.INTERSECTION_RADIUS\n                )\n            ) {\n                ctx.lineWidth = 2;\n                ctx.strokeStyle = 'grey';\n                // ctx.fillStyle = '#00ff00';\n                ctx.fillStyle = 'black';\n                ctx.setLineDash([]);\n\n                ctx.beginPath();\n                ctx.arc(\n                    coord[0],\n                    coord[1],\n                    Utils.scaleSingleCoord(\n                        constants.DISPLAY.INTERSECTION_RADIUS\n                    ),\n                    0,\n                    2 * Math.PI\n                );\n                // ctx.stroke();\n                ctx.fill();\n\n                if (showLabels) {\n                    ctx.font = Utils.scaleSingleCoord(50) + 'px Roboto';\n                    ctx.strokeStyle = 'white';\n                    ctx.strokeWidth = Utils.scaleSingleCoord(2);\n                    ctx.strokeText(intersectionId, coord[0], coord[1]);\n                    ctx.fillStyle = 'black';\n                    ctx.fillText(intersectionId, coord[0], coord[1]);\n                }\n            }\n        });\n    }\n}\n","import Utils from '../utils/Utils';\nimport constants from '../constants';\n\nexport default class VehicleRenderer {\n    static render(ctx, mapData, showLabels, curTripVehicleId) {\n        Object.entries(mapData.vehicles).forEach((vehicleEntry) => {\n            const vehicleId = vehicleEntry[0];\n            const vehicleData = vehicleEntry[1];\n\n            const coord = Utils.mapArrayCoord(vehicleData.coord);\n\n            if (\n                Utils.checkCoordinateInCanvasView(\n                    coord,\n                    constants.DISPLAY.VEHICLE_RADIUS\n                )\n            ) {\n                ctx.lineWidth = 2;\n                ctx.strokeStyle = 'grey';\n                if (curTripVehicleId === vehicleId) {\n                    ctx.fillStyle = 'purple';\n                } else {\n                    ctx.fillStyle = 'blue';\n                }\n                ctx.setLineDash([]);\n\n                ctx.beginPath();\n                ctx.arc(\n                    coord[0],\n                    coord[1],\n                    Utils.scaleSingleCoord(constants.DISPLAY.VEHICLE_RADIUS),\n                    0,\n                    2 * Math.PI\n                );\n                ctx.stroke();\n                ctx.fill();\n\n                if (showLabels || curTripVehicleId === vehicleId) {\n                    ctx.lineJoin = 'round';\n                    ctx.miterLimit = 2;\n                    const text = `${vehicleId} | Src: ${vehicleData.origin.name} | Dest: ${vehicleData.destination.name}`;\n                    ctx.font = Utils.scaleSingleCoord(15) + 'px Roboto';\n                    ctx.strokeStyle = 'black';\n                    ctx.strokeWidth = Utils.scaleSingleCoord(1);\n                    ctx.strokeText(text, coord[0], coord[1]);\n                    ctx.fillStyle = 'yellow';\n                    ctx.fillText(text, coord[0], coord[1]);\n                }\n            }\n        });\n    }\n}\n","import { getStore } from '../redux/store';\nimport { actionCreators, reduxConstants } from '../redux/actions';\nimport Utils from './Utils';\n\nconst MapDataHandler = {};\n\nMapDataHandler.mapData = null;\nMapDataHandler.lastUpdateTimeElapsedList = [];\nMapDataHandler.lastUpdateTime = performance.now();\nMapDataHandler.lastReduxUpdateTime = performance.now();\n\nconst REDUX_UPDATE_INTERVAL = 1000;\n\nconst updateMapDataListener = (data, manualUpdate = false) => {   \n    if (\n        manualUpdate ||\n        getStore().getState().curMode === reduxConstants.APP_MODE_LIST.VIEW_MAP\n    ) {\n        MapDataHandler.mapData = data;\n    }\n\n    if (!getStore().getState().mapDataLoaded) {\n        getStore().dispatch(actionCreators.setMapDataLoaded(true));\n    }\n\n    if (getStore().getState().followCurTripVehicle) {\n        const curVehicleId = getStore().getState().curTripVehicleId;\n        if (MapDataHandler.mapData.vehicles[curVehicleId]) {\n            const coords = MapDataHandler.mapData.vehicles[curVehicleId].coord;\n            getStore().dispatch(\n                actionCreators.setCanvasProps({\n                    centerX: Utils.scaleSingleCoord(coords[0]),\n                    centerY: Utils.scaleSingleCoord(coords[1]),\n                })\n            );\n        } else {\n            getStore().dispatch(actionCreators.setFollowCurTripVehicle(false));\n            getStore().dispatch(\n                actionCreators.setCurTripVehicleId(\n                    reduxConstants.COMPLETED_TRIP_VEHICLE_ID\n                )\n            );\n        }\n    }\n\n    // update FPS\n    const now = performance.now();\n    const lastUpdateTimeElapsed = now - MapDataHandler.lastUpdateTime;\n    MapDataHandler.lastUpdateTimeElapsedList.push(lastUpdateTimeElapsed);\n    if (MapDataHandler.lastUpdateTimeElapsedList.length > 100) {\n        MapDataHandler.lastUpdateTimeElapsedList.shift();\n    }\n    if (now - MapDataHandler.lastReduxUpdateTime > REDUX_UPDATE_INTERVAL) {\n        const averageUpdateTimeElapsed =\n            MapDataHandler.lastUpdateTimeElapsedList.reduce(\n                (a, b) => a + b,\n                0\n            ) / MapDataHandler.lastUpdateTimeElapsedList.length;\n        let averageUpdatesPerSecond = 1000 / averageUpdateTimeElapsed;\n        if (MapDataHandler.lastUpdateTimeElapsedList.length < 100) {\n            averageUpdatesPerSecond = Number.POSITIVE_INFINITY;\n        }\n        getStore().dispatch(\n            actionCreators.setAverageUpdatesPerSecond(averageUpdatesPerSecond)\n        );\n        MapDataHandler.lastReduxUpdateTime = now;\n    }\n    MapDataHandler.lastUpdateTime = now;\n};\n\nMapDataHandler.init = (socket) => {\n    socket.on('update-map-data', updateMapDataListener);\n};\n\nMapDataHandler.cleanup = (socket) => {\n    socket.off('update-map-data', updateMapDataListener);\n};\n\nMapDataHandler.updateMapData = (data) => {\n    updateMapDataListener(data, true);\n};\n\nexport default MapDataHandler;\n","import RoadRenderer from './RoadRenderer';\nimport LocationRenderer from './LocationRenderer';\nimport IntersectionRenderer from './IntersectionRenderer';\nimport VehicleRenderer from './VehicleRenderer';\nimport { getStore } from '../redux/store';\nimport MapDataHandler from '../utils/MapDataHandler';\nimport { actionCreators } from '../redux/actions';\n\nconst REDUX_UPDATE_INTERVAL = 1000;\n\nexport default class MapRenderer {\n    static lastRenderTimeElapsedList = [];\n    static lastRenderTime = performance.now();\n    static lastReduxUpdateTime = performance.now();\n\n    static getMapData() {\n        return MapDataHandler.mapData;\n    }\n\n    static getShowLabels() {\n        const curState = getStore().getState();\n        const { showToggleDynamicLabels, followCurTripVehicle } = curState;\n        const showDynamicLabels = curState.showLabels.dynamic;\n        return (\n            showToggleDynamicLabels &&\n            showDynamicLabels &&\n            !followCurTripVehicle\n        );\n    }\n\n    static getCurTripVehicleId() {\n        return getStore().getState().curTripVehicleId;\n    }\n\n    static _renderStatic(staticCanvas) {\n        const mapData = this.getMapData();\n        const showLabels = this.getShowLabels();\n        const {\n            width: canvasWidth,\n            height: canvasHeight,\n        } = getStore().getState().canvasDimensions;\n        if (mapData && staticCanvas) {\n            const staticCtx = staticCanvas.getContext('2d');\n            staticCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n            staticCtx.fillStyle = '#dddddd';\n            staticCtx.fillRect(0, 0, canvasWidth, canvasHeight);        \n\n            RoadRenderer.render(staticCtx, mapData, showLabels);\n            LocationRenderer.render(staticCtx, mapData, true);\n            IntersectionRenderer.render(staticCtx, mapData, false);\n        }\n    }\n\n    static _renderDynamic(dynamicCanvas) {\n        const mapData = this.getMapData();\n        const showLabels = this.getShowLabels();\n        const {\n            width: canvasWidth,\n            height: canvasHeight,\n        } = getStore().getState().canvasDimensions;\n        if (mapData && dynamicCanvas) {\n            const dynamicCtx = dynamicCanvas.getContext('2d');\n            dynamicCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n            VehicleRenderer.render(\n                dynamicCtx,\n                mapData,\n                showLabels,\n                this.getCurTripVehicleId()\n            );\n        }\n    }\n\n    static renderAll(statisCanvas, dynamicCanvas) {\n        this._renderStatic(statisCanvas);\n        this._renderDynamic(dynamicCanvas);\n\n        const now = performance.now();\n        const lastRenderTimeElapsed = now - this.lastRenderTime;\n        this.lastRenderTimeElapsedList.push(lastRenderTimeElapsed);\n        if (this.lastRenderTimeElapsedList.length > 100) {\n            this.lastRenderTimeElapsedList.shift();\n        }\n        if (now - this.lastReduxUpdateTime > REDUX_UPDATE_INTERVAL) {\n            const averageRenderTimeElapsed =\n                this.lastRenderTimeElapsedList.reduce((a, b) => a + b, 0) /\n                this.lastRenderTimeElapsedList.length;\n            let averageRendersPerSecond = 1000 / averageRenderTimeElapsed;\n            if (this.lastRenderTimeElapsedList.length < 100) {\n                averageRendersPerSecond = Number.POSITIVE_INFINITY;\n            }\n            getStore().dispatch(\n                actionCreators.setAverageRendersPerSecond(\n                    averageRendersPerSecond\n                )\n            );\n            this.lastReduxUpdateTime = now;\n        }\n        this.lastRenderTime = now;\n    }\n}\n","import React, { useCallback } from 'react';\nimport { useRef } from 'react';\nimport { useEffect } from 'react';\nimport MapRenderer from '../renderers/MapRenderer';\nimport { actionCreators } from '../redux/actions';\nimport { connect } from 'react-redux';\nimport { Spinner } from 'reactstrap';\n\nconst SHOW_LABEL_MIN_ZOOM_LEVEL = 0.4;\n\nfunction Map({\n    showToggleDynamicLabels,\n    dispatch,\n    canvasProps,\n    canvasDimensions,\n    mapLoaded,\n    followCurTripVehicle,\n}) {\n    const staticCanvasRef = useRef(null);\n    const dynamicCanvasRef = useRef(null);\n    const canvasContainerRef = useRef(null);\n\n    useEffect(() => {\n        dispatch(\n            actionCreators.setCanvasProps({\n                centerX: 0,\n                centerY: 0,\n                zoom: 0.5,\n            })\n        );\n\n        const onWindowResize = () => {\n            dispatch(\n                actionCreators.setCanvasDimensions({\n                    height: window.innerHeight,\n                    width: window.innerWidth,\n                })\n            );\n        };\n\n        onWindowResize();\n        window.addEventListener('resize', onWindowResize);\n\n        return () => {\n            window.removeEventListener('resize', onWindowResize);\n        };\n    }, [dispatch]);\n\n    const dragging = useRef(false);\n    const lastDragCoord = useRef(null);\n\n    useEffect(() => {\n        const keyDownHandler = (event) => {\n            const eventKey = event.key;\n            let deltaX = 0;\n            let deltaY = 0;\n            switch (eventKey) {\n                case 'ArrowUp':\n                    deltaY = 50;\n                    break;\n                case 'ArrowDown':\n                    deltaY = -50;\n                    break;\n                case 'ArrowLeft':\n                    deltaX = 50;\n                    break;\n                case 'ArrowRight':\n                    deltaX = -50;\n                    break;\n                default:\n                    break;\n            }\n            dispatch(\n                actionCreators.setCanvasPropsDiff({\n                    centerX: deltaX,\n                    centerY: deltaY,\n                    zoom: 1,\n                })\n            );\n        };\n\n        window.addEventListener('keydown', keyDownHandler);\n        return () => {\n            window.removeEventListener('keydown', keyDownHandler);\n        };\n    }, [dispatch]);\n\n    const onZoom = useCallback(\n        (event) => {\n            event.preventDefault();\n            event.stopPropagation();\n            if (mapLoaded) {\n                const { pageX, pageY, deltaY } = event;\n\n                const ZOOM_FACTOR = 1.25;\n                let curZoomFactor = 1;\n                if (deltaY > 0) {\n                    // zoom out\n                    curZoomFactor = 1 / ZOOM_FACTOR;\n                } else if (deltaY < 0) {\n                    // zoom in\n                    curZoomFactor = ZOOM_FACTOR;\n                }\n\n                if (followCurTripVehicle) {\n                    dispatch(\n                        actionCreators.setCanvasPropsZoom(curZoomFactor, {\n                            x: 0,\n                            y: 0,\n                        })\n                    );\n                } else {\n                    const zoomCenterInCanvasView = {\n                        x: pageX - staticCanvasRef.current.offsetLeft,\n                        y: pageY - staticCanvasRef.current.offsetTop,\n                    };\n\n                    const zoomOffsetFromViewCentre = {\n                        x:\n                            zoomCenterInCanvasView.x -\n                            canvasDimensions.width / 2,\n                        y:\n                            zoomCenterInCanvasView.y -\n                            canvasDimensions.height / 2,\n                    };\n\n                    dispatch(\n                        actionCreators.setCanvasPropsZoom(\n                            curZoomFactor,\n                            zoomOffsetFromViewCentre\n                        )\n                    );\n                }\n            }\n            return false;\n        },\n        [canvasDimensions, dispatch, mapLoaded, followCurTripVehicle]\n    );\n\n    useEffect(() => {\n        if (canvasContainerRef.current) {\n            dispatch(\n                actionCreators.setCanvasOffset({\n                    left: canvasContainerRef.current.offsetLeft,\n                    top: canvasContainerRef.current.offsetTop,\n                })\n            );\n            const curCanvasContainerRef = canvasContainerRef.current;\n            curCanvasContainerRef.addEventListener('wheel', onZoom, {\n                passive: false,\n            });\n            return () => {\n                curCanvasContainerRef.removeEventListener('wheel', onZoom);\n            };\n        }\n    }, [canvasContainerRef, mapLoaded, dispatch, onZoom]);\n\n    const curWindowRequestAnimationFrame = useRef(null);\n    useEffect(() => {\n        const renderMap = () => {\n            MapRenderer.renderAll(\n                staticCanvasRef.current,\n                dynamicCanvasRef.current\n            );\n            curWindowRequestAnimationFrame.current = window.requestAnimationFrame(\n                renderMap\n            );\n        };\n        curWindowRequestAnimationFrame.current = window.requestAnimationFrame(\n            renderMap\n        );\n\n        return () => {\n            window.cancelAnimationFrame(curWindowRequestAnimationFrame.current);\n        };\n    }, []);\n\n    const onDragStart = (event) => {\n        event.preventDefault();\n        if (mapLoaded && !followCurTripVehicle) {\n            dragging.current = true;\n            lastDragCoord.current = {\n                x: event.screenX,\n                y: event.screenY,\n            };\n        }\n    };\n\n    const onDragEnd = (event) => {\n        dragging.current = false;\n        lastDragCoord.current = null;\n    };\n\n    const lastDragEvent = useRef(null);\n    const onDragMove = (event) => {\n        const DRAG_UPDATE_LIMIT_MS = 1000 / 30;\n        const now = performance.now();\n        if (\n            dragging.current &&\n            (!lastDragEvent.current ||\n                now - lastDragEvent.current > DRAG_UPDATE_LIMIT_MS)\n        ) {\n            lastDragEvent.current = now;\n            const lastCoord = {\n                x: lastDragCoord.current.x,\n                y: lastDragCoord.current.y,\n            };\n            const curCoord = {\n                x: event.screenX,\n                y: event.screenY,\n            };\n\n            dispatch(\n                actionCreators.setCanvasPropsDiff({\n                    zoom: 1,\n                    centerX: -(curCoord.x - lastCoord.x),\n                    centerY: -(curCoord.y - lastCoord.y),\n                })\n            );\n            lastDragCoord.current = curCoord;\n        }\n    };\n\n    useEffect(() => {\n        if (canvasProps.zoom < SHOW_LABEL_MIN_ZOOM_LEVEL) {\n            if (showToggleDynamicLabels) {\n                dispatch(actionCreators.setShowToggleDynamicLabels(false));\n            }\n        } else {\n            if (!showToggleDynamicLabels) {\n                dispatch(actionCreators.setShowToggleDynamicLabels(true));\n            }\n        }\n    }, [canvasProps.zoom, showToggleDynamicLabels, dispatch]);\n\n    return (\n        <div\n            onMouseDown={onDragStart}\n            onMouseUp={onDragEnd}\n            onMouseLeave={onDragEnd}\n            onMouseMove={onDragMove}\n            ref={canvasContainerRef}\n            style={{\n                height: canvasDimensions.height,\n                width: canvasDimensions.width,\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                zIndex: -1,\n                overflow: 'hidden',\n            }}\n        >\n            {mapLoaded ? (\n                <div>\n                    <canvas\n                        style={{\n                            position: 'absolute',\n                            zIndex: 2,\n                        }}\n                        ref={dynamicCanvasRef}\n                        height={canvasDimensions.height}\n                        width={canvasDimensions.width}\n                    />\n                    <canvas\n                        style={{\n                            position: 'absolute',\n                            zIndex: 1,\n                        }}\n                        ref={staticCanvasRef}\n                        height={canvasDimensions.height}\n                        width={canvasDimensions.width}\n                    />\n                </div>\n            ) : (\n                <div\n                    style={{\n                        backgroundColor: '#dddddd',\n                        height: '100%',\n                        width: '100%',\n                        display: 'flex',\n                        alignContent: 'center',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                    }}\n                >\n                    <div\n                        style={{\n                            display: 'flex',\n                            alignContent: 'center',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            flexDirection: 'column',\n                        }}\n                    >\n                        <div className=\"mb-2\">\n                            <Spinner type=\"grow\" color=\"primary\" size=\"m\" />\n                        </div>\n                        <div>Conneting to server...</div>\n                        <div>This may take a minute while the server starts.</div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => ({\n    curMode: state.curMode,\n    mapLoaded: state.mapDataLoaded,\n    showDynamicLabels: state.showLabels.dynamic,\n    showToggleDynamicLabels: state.showToggleDynamicLabels,\n    canvasProps: state.canvasProps,\n    canvasDimensions: state.canvasDimensions,\n    followCurTripVehicle: state.followCurTripVehicle,\n});\n\nexport default connect(mapStateToProps)(Map);\n","import Utils from './Utils';\nimport constants from '../constants';\nimport MapDataHandler from './MapDataHandler';\n\nconst ComponetFinder = {};\n\nconst intersectionFinder = (mapCoordinates, mapData, pointerRadius, excludeIdList) => {\n    for (const intersectionEntry of Object.entries(mapData.intersections)) {\n        if (!excludeIdList.includes(intersectionEntry[0])) {\n            const intersectionData = intersectionEntry[1];\n            const distance = Utils.getDistanceBetweenArrayCoords(\n                intersectionData.coord,\n                mapCoordinates\n            );\n\n            if (\n                distance <\n                constants.DISPLAY.INTERSECTION_RADIUS + pointerRadius\n            ) {\n                return {\n                    type: 'intersection',\n                    id: intersectionEntry[0],\n                    data: intersectionEntry[1],\n                };\n            }\n        }\n    }\n    return null;\n};\n\nconst locationFinder = (mapCoordinates, mapData, pointerRadius, excludeIdList) => {\n    for (const locationEntry of Object.entries(mapData.locations)) {\n        if (!excludeIdList.includes(locationEntry[0])) {\n            const locationData = locationEntry[1];\n            const distance = Utils.getDistanceBetweenArrayCoords(\n                locationData.coord,\n                mapCoordinates\n            );\n\n            if (distance < constants.DISPLAY.LOCATION_RADIUS + pointerRadius) {\n                return {\n                    type: 'location',\n                    id: locationEntry[0],                    \n                    data: locationEntry[1],\n                };\n            }\n        }\n    }\n    return null;\n};\n\nComponetFinder.findComponent = (\n    mapCoordinates,\n    pointerRadius = 0,\n    excludeIdList = []\n) => {\n    const mapData = MapDataHandler.mapData;\n    const finderFuncs = [intersectionFinder, locationFinder];\n    for (const func of finderFuncs) {\n        const component = func(\n            mapCoordinates,\n            mapData,\n            pointerRadius,\n            excludeIdList\n        );\n        if (component) {\n            return component;\n        }\n    }\n};\n\nexport default ComponetFinder;\n","import React from 'react';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nexport default function LowFpsModal({ isOpen, setIsOpen }) {\n    return (\n        <Modal\n            isOpen={isOpen}\n            toggle={() => {\n                setIsOpen(!isOpen);\n            }}\n        >\n            <ModalHeader\n                toggle={() => {\n                    setIsOpen(!isOpen);\n                }}\n            >\n                Low FPS Detected\n            </ModalHeader>\n            <ModalBody>\n                It has been detected at the map is running at a lower than\n                optimal frame rate. It may help to hide the labels by toggling\n                the <code>Toggle Labels</code> checkbox\n            </ModalBody>\n            <ModalFooter>\n                <Button\n                    color=\"primary\"\n                    onClick={() => {\n                        setIsOpen(!isOpen);\n                    }}\n                >\n                    OK\n                </Button>\n            </ModalFooter>\n        </Modal>\n    );\n}\n","import React, { useState } from 'react';\nimport {\n    AiOutlineMinusSquare,\n    AiOutlinePlusSquare,\n    AiFillMinusSquare,\n    AiFillPlusSquare,\n} from 'react-icons/ai';\n\nexport default function MenuSection({\n    sectionName,\n    children,\n    openInitial = true,\n}) {\n    const [showChildren, setShowChildren] = useState(openInitial);\n\n    let IconClass;\n    if (showChildren) {\n        IconClass = AiFillMinusSquare;\n    } else {\n        IconClass = AiFillPlusSquare;\n    }\n\n    return (\n        <div className=\"mx-2 my-1\">\n            <div\n                className=\"font-weight-bold\"\n                style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignContent: 'center',\n                    alignItems: 'center',\n                }}\n            >\n                {sectionName}\n                <div\n                    style={{\n                        cursor: 'pointer',\n                    }}\n                    onClick={() => {\n                        setShowChildren((oldShowChildren) => !oldShowChildren);\n                    }}\n                >\n                    <IconClass />\n                </div>\n            </div>\n            {showChildren && <div>{children}</div>}\n            <hr className=\"mb-0\" />\n        </div>\n    );\n}\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { FaPen } from 'react-icons/fa';\nimport { Input, Form } from 'reactstrap';\n\nfunction SelectedDisplay({\n    hoveredComponent,\n    selectedComponent,\n    updateLocationName,\n}) {\n    const [editingName, setEditingName] = useState(false);\n    const [newName, setNewName] = useState('');\n\n    const componentData = hoveredComponent || selectedComponent;\n    let Content;\n    if (componentData) {\n        Content = (\n            <div>\n                <div>Type: {componentData.type}</div>\n                {componentData.type === 'location' && (\n                    <div>\n                        Name:{' '}\n                        {editingName && updateLocationName ? (\n                            <Form\n                                inline\n                                onSubmit={(e) => {\n                                    e.preventDefault();\n                                    updateLocationName(\n                                        componentData.id,\n                                        newName\n                                    );\n                                    setEditingName(false);\n                                    return false;\n                                }}\n                            >\n                                <Input\n                                    style={{\n                                        fontSize: 12,\n                                    }}\n                                    className=\"my-1\"\n                                    type=\"text\"\n                                    name=\"component-name\"\n                                    autoFocus\n                                    onBlur={() => {\n                                        updateLocationName(\n                                            componentData.id,\n                                            newName\n                                        );\n                                        setEditingName(false);\n                                    }}\n                                    onChange={(event) => {\n                                        setNewName(event.target.value);\n                                    }}\n                                    value={newName}\n                                />\n                            </Form>\n                        ) : componentData.data.name ? (\n                            componentData.data.name\n                        ) : (\n                            <span\n                                style={{\n                                    color: 'grey',\n                                }}\n                            >\n                                No name set\n                            </span>\n                        )}\n                        {!editingName && updateLocationName && (\n                            <FaPen\n                                className=\"ml-2\"\n                                style={{ cursor: 'pointer' }}\n                                onClick={() => {\n                                    setNewName(componentData.data.name);\n                                    setEditingName(true);\n                                }}\n                            />\n                        )}\n                    </div>\n                )}\n                <div>\n                    Coordiantes: [{componentData.data.coord[0].toFixed(3)},{' '}\n                    {componentData.data.coord[1].toFixed(3)}]\n                </div>\n            </div>\n        );\n    } else {\n        Content = <div>No component selected</div>;\n    }\n\n    return (\n        <div\n            style={{\n                fontSize: 12,\n            }}\n        >\n            {Content}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        selectedComponent: state.selectedComponent,\n        hoveredComponent: state.hoveredComponent,\n    };\n};\n\nexport default connect(mapStateToProps)(SelectedDisplay);\n","import React, { useEffect, useState } from 'react';\nimport { FormGroup, Label, Input, Button, Alert } from 'reactstrap';\nimport { actionCreators, reduxConstants } from '../../redux/actions';\nimport MapDataHandler from '../../utils/MapDataHandler';\nimport { connect } from 'react-redux';\n\nfunction NavigateSection({\n    curMode,\n    curTripVehicleId,\n    mapDataLoaded,\n    socket,\n    followCurTripVehicle,\n    dispatch,\n}) {\n    const [curTripVehicleData, setCurTripVehicleData] = useState(null);\n\n    const startTrip = (startWaypointId, endWaypointId) => {\n        if (socket) {\n            socket.emit('start-trip', {\n                originId: startWaypointId,\n                destinationId: endWaypointId,\n            });\n        }\n    };\n\n    useEffect(() => {\n        if (\n            curTripVehicleId &&\n            curTripVehicleId !== reduxConstants.COMPLETED_TRIP_VEHICLE_ID\n        ) {\n            setCurTripVehicleData(\n                MapDataHandler.mapData.vehicles[curTripVehicleId]\n            );\n        }\n    }, []); // should only trigger on mount, not on every curTripVehicleId change\n\n    useEffect(() => {\n        if (socket) {\n            const startTripResListener = (startTripRes) => {\n                if (startTripRes) {\n                    setCurTripVehicleData(startTripRes);\n                    dispatch(\n                        actionCreators.setCurTripVehicleId(startTripRes.id)\n                    );\n                    dispatch(actionCreators.setFollowCurTripVehicle(true));\n                }\n            };\n            socket.on('start-trip-res', startTripResListener);\n            return () => {\n                socket.off('start-trip-res', startTripResListener);\n            };\n        }\n    }, [socket, dispatch]);\n\n    const locationList = mapDataLoaded\n        ? Object.values(MapDataHandler.mapData.locations)\n        : [];\n\n    locationList.sort((a, b) => {\n        if (a.name < b.name) {\n            return -1;\n        } else if (a.name > b.name) {\n            return 1;\n        }\n        return 0;\n    });\n\n    const selectOptionStyle = {\n        fontSize: 10,\n    };\n\n    let Content;\n    if (curMode === reduxConstants.APP_MODE_LIST.CREATE_MAP) {\n        Content = (\n            <div>\n                Starting a trip is not allowed when building a map. Switch to\n                View Mode to start a trip.\n            </div>\n        );\n    } else if (\n        curTripVehicleId &&\n        curTripVehicleId !== reduxConstants.COMPLETED_TRIP_VEHICLE_ID &&\n        curTripVehicleData\n    ) {\n        Content = (\n            <div\n                style={{\n                    fontSize: 12,\n                }}\n            >\n                <div>\n                    <span className=\"font-weight-bold\">Vehicle ID: </span>\n                    {curTripVehicleId}\n                </div>\n                <div>\n                    <span className=\"font-weight-bold\">Origin: </span>\n                    {curTripVehicleData.origin.name}\n                </div>\n                <div>\n                    <span className=\"font-weight-bold\">Destination: </span>\n                    {curTripVehicleData.destination.name}\n                </div>\n                <div\n                    style={{\n                        display: 'flex',\n                        flexDirection: 'row',\n                        alignItems: 'center',\n                        alignContent: 'center',\n                    }}\n                    className=\"my-1\"\n                >\n                    <input\n                        type=\"checkbox\"\n                        id=\"follow-cur-trip-chkbox\"\n                        className=\"mr-1\"\n                        checked={followCurTripVehicle}\n                        onChange={(event) => {\n                            const checked = event.target.checked;\n                            dispatch(\n                                actionCreators.setFollowCurTripVehicle(checked)\n                            );\n                        }}\n                    />\n                    <label\n                        htmlFor=\"follow-cur-trip-chkbox\"\n                        className=\"m-0\"\n                        style={{\n                            userSelect: 'none',\n                            fontSize: 10,\n                        }}\n                    >\n                        Toggle Follow Current Trip Vehicle\n                    </label>\n                </div>\n                <Button\n                    className=\"mt-2\"\n                    color=\"primary\"\n                    style={{\n                        fontSize: 10,\n                    }}\n                    onClick={() => {\n                        setCurTripVehicleData(null);\n                        dispatch(actionCreators.setCurTripVehicleId(null));\n                        dispatch(actionCreators.setFollowCurTripVehicle(false));\n                    }}\n                >\n                    Start a New Trip\n                </Button>\n            </div>\n        );\n    } else {\n        Content = (\n            <div\n                style={{\n                    fontSize: 10,\n                }}\n            >\n                <div>\n                    {curTripVehicleId ===\n                        reduxConstants.COMPLETED_TRIP_VEHICLE_ID && (\n                        <Alert\n                            className=\"mb-1 mt-2 p-2\"                            \n                            color=\"success\"\n                        >\n                            <div className=\"font-weight-bold\">\n                                You have reached your destination!\n                            </div>\n                            You can start a new trip below.\n                        </Alert>\n                    )}\n                    <Label\n                        for=\"navigate-origin\"\n                        className=\"font-weight-bold mb-1 mt-1\"\n                    >\n                        Origin\n                    </Label>\n                    <Input\n                        style={selectOptionStyle}\n                        type=\"select\"\n                        name=\"select\"\n                        id=\"navigate-origin\"\n                    >\n                        {locationList.map((location) => {\n                            return (\n                                <option\n                                    key={location.id}\n                                    value={location.id}\n                                    style={selectOptionStyle}\n                                >\n                                    {location.name}\n                                </option>\n                            );\n                        })}\n                    </Input>\n                </div>\n                <div>\n                    <Label\n                        for=\"navigate-dest\"\n                        className=\"font-weight-bold mb-1 mt-2\"\n                    >\n                        Destination\n                    </Label>\n                    <Input\n                        style={selectOptionStyle}\n                        type=\"select\"\n                        name=\"select\"\n                        id=\"navigate-dest\"\n                    >\n                        {locationList.map((location) => {\n                            return (\n                                <option\n                                    key={location.id}\n                                    value={location.id}\n                                    style={selectOptionStyle}\n                                >\n                                    {location.name}\n                                </option>\n                            );\n                        })}\n                    </Input>\n                </div>\n                <Button\n                    className=\"mt-2\"\n                    color=\"primary\"\n                    style={{\n                        fontSize: 10,\n                    }}\n                    onClick={() => {\n                        startTrip(\n                            document.getElementById('navigate-origin').value,\n                            document.getElementById('navigate-dest').value\n                        );\n                    }}\n                >\n                    Navigate\n                </Button>\n            </div>\n        );\n    }\n\n    return (\n        <div>\n            <div className=\"mb-1\">\n                {curTripVehicleId ? 'Trip Progress' : 'Start a Trip'}\n            </div>\n            {Content}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => ({\n    mapDataLoaded: state.mapDataLoaded,\n    curTripVehicleId: state.curTripVehicleId,\n    followCurTripVehicle: state.followCurTripVehicle,\n    curMode: state.curMode,\n});\n\nexport default connect(mapStateToProps)(NavigateSection);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { actionCreators, reduxConstants } from '../../redux/actions';\nimport { Button } from 'reactstrap';\n\nfunction MapSettings({\n    curMode,\n    showToggleDynamicLabels,\n    showDynamicLabels,\n    followCurTripVehicle,\n    dispatch,\n}) {\n    return (\n        <div>\n            {showToggleDynamicLabels &&\n                !followCurTripVehicle &&\n                curMode === reduxConstants.APP_MODE_LIST.VIEW_MAP && (\n                    <div\n                        style={{\n                            display: 'flex',\n                            flexDirection: 'row',\n                            alignItems: 'center',\n                            alignContent: 'center',\n                        }}\n                        className=\"my-1\"\n                    >\n                        <input\n                            type=\"checkbox\"\n                            id=\"show-labels-chkbox\"\n                            className=\"mr-1\"\n                            checked={showDynamicLabels}\n                            onChange={(event) => {\n                                const checked = event.target.checked;\n                                dispatch(\n                                    actionCreators.setShowDynamicLabels(checked)\n                                );\n                            }}\n                        />\n                        <label\n                            htmlFor=\"show-labels-chkbox\"\n                            className=\"m-0\"\n                            style={{\n                                userSelect: 'none',\n                                fontSize: 10,\n                            }}\n                        >\n                            Show Vehicle Labels\n                        </label>\n                    </div>\n                )}\n            <div>\n                <Button\n                    color=\"link\"\n                    style={{\n                        fontSize: 10,\n                        padding: 0,\n                    }}\n                    onClick={() => {\n                        if (\n                            curMode === reduxConstants.APP_MODE_LIST.CREATE_MAP\n                        ) {\n                            dispatch(\n                                actionCreators.setCurMode(\n                                    reduxConstants.APP_MODE_LIST.VIEW_MAP\n                                )\n                            );\n                        } else {\n                            dispatch(\n                                actionCreators.setCurMode(\n                                    reduxConstants.APP_MODE_LIST.CREATE_MAP\n                                )\n                            );\n                        }\n                    }}\n                >\n                    {curMode === reduxConstants.APP_MODE_LIST.CREATE_MAP\n                        ? 'Switch to View Mode'\n                        : 'Switch to Create Mode'}\n                </Button>\n            </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        showToggleDynamicLabels: state.showToggleDynamicLabels,\n        curMode: state.curMode,\n        showDynamicLabels: state.showLabels.dynamic,\n        followCurTripVehicle: state.followCurTripVehicle,\n    };\n};\n\nexport default connect(mapStateToProps)(MapSettings);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport MapDataHandler from '../../utils/MapDataHandler';\nimport { reduxConstants } from '../../redux/actions';\n\nfunction MapStats({\n    mapDataLoaded,\n    averageUpdatesPerSecond,\n    averageRendersPerSecond,\n    curMode,\n}) {\n    let Content;\n    const statRowStyle = {};\n\n    if (mapDataLoaded) {\n        const mapData = MapDataHandler.mapData;\n        Content = (\n            <div>\n                <div style={statRowStyle}>Map ID: {mapData.id}</div>\n                <div style={statRowStyle}>\n                    Total Vehicles: {Object.keys(mapData.vehicles).length}\n                </div>\n                <div style={statRowStyle}>\n                    Total Intersections:{' '}\n                    {Object.keys(mapData.intersections).length}\n                </div>\n                <div style={statRowStyle}>\n                    Total Locations: {Object.keys(mapData.locations).length}\n                </div>\n                <div style={statRowStyle}>\n                    Total Roads: {Object.keys(mapData.roads).length}\n                </div>\n                {curMode === reduxConstants.APP_MODE_LIST.VIEW_MAP && (\n                    <div style={statRowStyle}>\n                        Avg Updates/Sec: {averageUpdatesPerSecond.toFixed(2)}\n                    </div>\n                )}\n                <div style={statRowStyle}>\n                    Avg Renders/Sec: {averageRendersPerSecond.toFixed(2)}\n                </div>\n            </div>\n        );\n    } else {\n        Content = <div>Map data not loaded.</div>;\n    }\n\n    return (\n        <div\n            style={{\n                fontSize: 12,\n            }}\n        >\n            {Content}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        averageUpdatesPerSecond: state.averageUpdatesPerSecond,\n        averageRendersPerSecond: state.averageRendersPerSecond,\n        mapDataLoaded: state.mapDataLoaded,\n        curMode: state.curMode,\n    };\n};\n\nexport default connect(mapStateToProps)(MapStats);\n","import React from 'react';\nimport { Button, Alert } from 'reactstrap';\nimport { reduxConstants } from '../../redux/actions';\nimport { connect } from 'react-redux';\n\nfunction BuildSection({ buildActionHandler, curBuildPointerType }) {\n    const buildSectionButtonStyles = {\n        fontSize: 10,\n    };\n\n    let buildStatusContent;\n\n    const { BUILD_POINTER_TYPE } = reduxConstants;\n    switch (curBuildPointerType) {\n        case BUILD_POINTER_TYPE.LOCATION: {\n            buildStatusContent = (\n                <div>\n                    <div className=\"font-weight-bold\">\n                        You are currently adding a location.\n                    </div>\n                    Left-click to put down a location.\n                    <br />\n                    Right-click to cancel.\n                </div>\n            );\n            break;\n        }\n        case BUILD_POINTER_TYPE.INTERSECTION: {\n            buildStatusContent = (\n                <div>\n                    <div className=\"font-weight-bold\">\n                        You are currently adding an intersection.\n                    </div>\n                    Left-click to put down a intersection.\n                    <br />\n                    Right-click to cancel.\n                </div>\n            );\n            break;\n        }\n        case BUILD_POINTER_TYPE.MAJOR_ROAD: {\n            buildStatusContent = (\n                <div>\n                    <div className=\"font-weight-bold\">\n                        You are currently building major road.\n                    </div>\n                    Start by left-clicking on a location or intersection to mark\n                    the starting point.\n                    <br />\n                    After, left-click on another location or intersection to\n                    mark the endpoint point.\n                    <br />\n                    Continue left-clicking on locations or intersections to\n                    extend the road.\n                    <br />\n                    Right-click to cancel.\n                </div>\n            );\n            break;\n        }\n        case BUILD_POINTER_TYPE.MINOR_ROAD: {\n            buildStatusContent = (\n                <div>\n                    <div className=\"font-weight-bold\">\n                        You are currently building minor road.\n                    </div>\n                    Start by left-clicking on a location or intersection to mark\n                    the starting point.\n                    <br />\n                    After, left-click on another location or intersection to\n                    mark the endpoint point.\n                    <br />\n                    Continue left-clicking on locations or intersections to\n                    extend the road.\n                    <br />\n                    Right-click to cancel.\n                </div>\n            );\n            break;\n        }\n        case BUILD_POINTER_TYPE.LOCAL_ROAD: {\n            buildStatusContent = (\n                <div>\n                    <div className=\"font-weight-bold\">\n                        You are currently building local road.\n                    </div>\n                    Start by left-clicking on a location or intersection to mark\n                    the starting point.\n                    <br />\n                    After, left-click on another location or intersection to\n                    mark the endpoint point.\n                    <br />\n                    Continue left-clicking on locations or intersections to\n                    extend the road.\n                    <br />\n                    Right-click to cancel.\n                </div>\n            );\n            break;\n        }\n        case BUILD_POINTER_TYPE.DELETE: {\n            buildStatusContent = (\n                <div>\n                    <div className=\"font-weight-bold\">\n                        You are currently deleting components.\n                    </div>\n                    Left-click on a location or intersection to delete it. All\n                    connected roads will be deleted as well.\n                    <br />\n                    Right-click to cancel.\n                </div>\n            );\n            break;\n        }\n        default: {\n            buildStatusContent = (\n                <div>\n                    <div className=\"font-weight-bold\">\n                        Select one of the grey buttons below to start building!\n                    </div>\n                    Click on the help button on the top right for details.\n                </div>\n            );\n            break;\n        }\n    }\n\n    return (\n        <div>\n            <div\n                style={{\n                    fontSize: 10,\n                }}\n            >\n                <Alert className=\"mb-1 mt-2 p-2\" color=\"info\">\n                    {buildStatusContent}\n                </Alert>\n                <Button\n                    outline\n                    color=\"secondary\"\n                    className=\"m-1\"\n                    style={buildSectionButtonStyles}\n                    onClick={() => {\n                        buildActionHandler(\n                            reduxConstants.BUILD_ACTIONS.ADD_LOCATION\n                        );\n                    }}\n                >\n                    Add Location\n                </Button>\n                <Button\n                    outline\n                    color=\"secondary\"\n                    style={buildSectionButtonStyles}\n                    onClick={() => {\n                        buildActionHandler(\n                            reduxConstants.BUILD_ACTIONS.ADD_INTERSECTION\n                        );\n                    }}\n                    className=\"m-1\"\n                >\n                    Add Intersection\n                </Button>\n                <Button\n                    outline\n                    color=\"secondary\"\n                    style={buildSectionButtonStyles}\n                    onClick={() => {\n                        buildActionHandler(\n                            reduxConstants.BUILD_ACTIONS.BUILD_MAJOR_ROAD\n                        );\n                    }}\n                    className=\"m-1\"\n                >\n                    Build Major Road\n                </Button>\n                <Button\n                    outline\n                    color=\"secondary\"\n                    style={buildSectionButtonStyles}\n                    onClick={() => {\n                        buildActionHandler(\n                            reduxConstants.BUILD_ACTIONS.BUILD_MINOR_ROAD\n                        );\n                    }}\n                    className=\"m-1\"\n                >\n                    Build Minor Road\n                </Button>\n                <Button\n                    outline\n                    color=\"secondary\"\n                    style={buildSectionButtonStyles}\n                    onClick={() => {\n                        buildActionHandler(\n                            reduxConstants.BUILD_ACTIONS.BUILD_LOCAL_ROAD\n                        );\n                    }}\n                    className=\"m-1\"\n                >\n                    Build Local Road\n                </Button>\n                <Button\n                    outline\n                    color=\"danger\"\n                    style={buildSectionButtonStyles}\n                    onClick={() => {\n                        buildActionHandler(\n                            reduxConstants.BUILD_ACTIONS.DELETE_COMPONENTS\n                        );\n                    }}\n                    className=\"m-1\"\n                >\n                    Delete Components\n                </Button>\n                <Button\n                    outline\n                    color=\"info\"\n                    style={buildSectionButtonStyles}\n                    onClick={() => {\n                        buildActionHandler(\n                            reduxConstants.BUILD_ACTIONS.RESET_POINTER\n                        );\n                    }}\n                    className=\"m-1\"\n                >\n                    Reset Pointer\n                </Button>\n                <Button\n                    outline\n                    color=\"success\"\n                    style={buildSectionButtonStyles}\n                    onClick={() => {\n                        buildActionHandler(\n                            reduxConstants.BUILD_ACTIONS.SAVE_MAP\n                        );\n                    }}\n                    className=\"m-1\"\n                >\n                    Save Map\n                </Button>\n            </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => ({\n    curBuildPointerType: state.curBuildPointerType,\n});\n\nexport default connect(mapStateToProps)(BuildSection);\n","import React from 'react';\nimport MenuSection from './MenuSection';\nimport SelectedDisplay from './MenuSections/SelectedDisplay';\nimport NavigateSection from './MenuSections/NavigateSection';\nimport MapSettings from './MenuSections/MapSettings';\nimport MapStats from './MenuSections/MapStats';\nimport { connect } from 'react-redux';\nimport { reduxConstants } from '../redux/actions';\nimport BuildSection from './MenuSections/BuildSection';\n\nfunction Menu({\n    socket,\n    curMode,\n    buildActionHandler,\n    updateLocationName,\n    mapDataLoaded,\n}) {\n    if (!mapDataLoaded) {\n        return null;\n    }\n    return (\n        <div\n            style={{\n                background: '#ffffffcc',\n                margin: 10,\n                display: 'flex',\n                flexDirection: 'column',\n                flexWrap: 'wrap',\n                justifyContent: 'space-between',\n                width: 300,\n                position: 'fixed',\n                borderRadius: 5,\n            }}\n        >\n            <MenuSection sectionName=\"Selected Component\">\n                <SelectedDisplay updateLocationName={updateLocationName} />\n            </MenuSection>\n            <MenuSection\n                sectionName={\n                    curMode === reduxConstants.APP_MODE_LIST.CREATE_MAP\n                        ? 'Build Controls'\n                        : 'Navigator'\n                }\n            >\n                {curMode === reduxConstants.APP_MODE_LIST.VIEW_MAP ? (\n                    <NavigateSection socket={socket} />\n                ) : (\n                    <BuildSection buildActionHandler={buildActionHandler} />\n                )}\n            </MenuSection>\n            <MenuSection sectionName=\"Map Stats\">\n                <MapStats />\n            </MenuSection>\n            <MenuSection sectionName=\"Map Settings\">\n                <MapSettings />\n            </MenuSection>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return { curMode: state.curMode, mapDataLoaded: state.mapDataLoaded };\n};\n\nexport default connect(mapStateToProps)(Menu);\n","import React from 'react';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport { actionCreators } from '../redux/actions';\nimport { FaQuestionCircle } from 'react-icons/fa';\n\nfunction AboutModalButton({ showAboutModal, dispatch }) {\n    const setIsOpen = (open) => {\n        dispatch(actionCreators.setShowAboutModal(open));\n    };\n\n    const isOpen = showAboutModal;\n\n    const AboutModal = (\n        <Modal\n            isOpen={isOpen}\n            toggle={() => {\n                setIsOpen(!isOpen);\n            }}\n        >\n            <ModalHeader\n                toggle={() => {\n                    setIsOpen(!isOpen);\n                }}\n            >\n                <img\n                    src={process.env.PUBLIC_URL + '/logo512.png'}\n                    alt=\"App logo\"\n                    height={30}\n                    className=\"mr-3\"\n                />\n                About Auto Drive Simulator\n            </ModalHeader>\n            <ModalBody>\n                <div>\n                    <div\n                        style={{\n                            fontSize: 12,\n                            color: 'grey',\n                        }}\n                    >\n                        A web app to simulate a city of fully autonmous driving\n                        vehicles.\n                    </div>\n                    <hr />\n                    <div\n                        style={{\n                            fontSize: 8,\n                        }}\n                    >\n                        Icons made by{' '}\n                        <a\n                            href=\"https://www.flaticon.com/authors/freepik\"\n                            title=\"Freepik\"\n                        >\n                            Freepik\n                        </a>{' '}\n                        from{' '}\n                        <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">\n                            www.flaticon.com\n                        </a>\n                    </div>\n                </div>\n            </ModalBody>\n        </Modal>\n    );\n\n    return (\n        <div>\n            {showAboutModal ? (\n                AboutModal\n            ) : (\n                <div\n                    style={{\n                        margin: 5,\n                        position: 'fixed',\n                        right: 0,\n                        top: 0,\n                        cursor: 'pointer',\n                    }}\n                    onClick={() => {\n                        setIsOpen(true);\n                    }}\n                >\n                    <FaQuestionCircle size={25} />\n                </div>\n            )}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        showAboutModal: state.showAboutModal,\n    };\n};\n\nexport default connect(mapStateToProps)(AboutModalButton);\n","import React, { useEffect, useState } from 'react';\nimport Map from './Map';\nimport { useRef } from 'react';\nimport Utils from '../utils/Utils';\nimport ComponentFinder from '../utils/ComponentFinder';\nimport LowFpsModal from './LowFpsModal';\nimport { connect } from 'react-redux';\nimport Menu from './Menu';\nimport { actionCreators } from '../redux/actions';\nimport AboutModalButton from './AboutModalButton';\n\nfunction MapViewer({\n    onMouseMove,\n    onMouseDown,\n    curPointerRadius,\n    curPointerComponentId,\n    cursorStyle,\n    socket,\n    averageUpdatesPerSecond,\n    selectedComponent,\n    hoveredComponent,\n    dispatch,\n    showDynamicLabels,\n    showLowFpsWarning,\n    mapDataLoaded,\n    canvasOffset,\n    buildActionHandler,\n    updateLocationName,\n}) {\n    const containerRef = useRef(null);\n\n    const getMapCoordinatesFromMouseEvent = (event) => {\n        const { pageX, pageY } = event;\n        const canvasCoordinates = [\n            pageX - canvasOffset.left,\n            pageY - canvasOffset.top,\n        ];\n        return Utils.unmapArrayCoord(canvasCoordinates);\n    };\n\n    useEffect(() => {\n        if (averageUpdatesPerSecond < 20 && showDynamicLabels) {\n            dispatch(actionCreators.setShowFpsWarning(true));\n        }\n    }, [averageUpdatesPerSecond, showDynamicLabels, dispatch]);\n\n    const mouseMoveHandler = (event) => {\n        if (mapDataLoaded && containerRef && containerRef.current) {\n            const mapCoordinates = getMapCoordinatesFromMouseEvent(event);\n            if (onMouseMove) {\n                onMouseMove(mapCoordinates);\n            }\n            const curHoveredComponent = ComponentFinder.findComponent(\n                mapCoordinates,\n                curPointerRadius,\n                [curPointerComponentId]\n            );\n            if (\n                (hoveredComponent ? hoveredComponent.id : hoveredComponent) !==\n                (curHoveredComponent\n                    ? curHoveredComponent.id\n                    : curHoveredComponent)\n            ) {\n                dispatch(\n                    actionCreators.setHoveredComponent(curHoveredComponent)\n                );\n            }\n        }\n    };\n\n    const mouseDownHandler = (event) => {\n        if (containerRef && containerRef.current) {\n            event.preventDefault();\n            const mapCoordinates = getMapCoordinatesFromMouseEvent(event);\n\n            if (onMouseDown) {\n                onMouseDown(mapCoordinates, event.button);\n            }\n\n            if (\n                !selectedComponent ||\n                (hoveredComponent &&\n                    selectedComponent.id !== hoveredComponent.id)\n            ) {\n                dispatch(actionCreators.setSelectedComponent(hoveredComponent));\n            }\n        }\n    };\n\n    return (\n        <div>\n            {showLowFpsWarning && (\n                <LowFpsModal\n                    isOpen={showLowFpsWarning}\n                    setIsOpen={(open) => {\n                        dispatch(actionCreators.setShowFpsWarning(open));\n                    }}\n                />\n            )}\n            <Menu\n                socket={socket}\n                buildActionHandler={buildActionHandler}\n                updateLocationName={updateLocationName}\n            />\n            <AboutModalButton />\n            <div\n                onMouseMove={mouseMoveHandler}\n                onMouseDown={mouseDownHandler}\n                onContextMenu={(event) => {\n                    event.preventDefault();\n                    return false;\n                }}\n                ref={containerRef}\n                style={{\n                    cursor: cursorStyle\n                        ? cursorStyle\n                        : hoveredComponent\n                        ? 'pointer'\n                        : 'move',\n                }}\n            >\n                <Map />\n            </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        mapDataLoaded: state.mapDataLoaded,\n        averageUpdatesPerSecond: state.averageUpdatesPerSecond,\n        selectedComponent: state.selectedComponent,\n        hoveredComponent: state.hoveredComponent,\n        showDynamicLabels: state.showLabels.dynamic,\n        showAboutModal: state.showAboutModal,\n        showLowFpsWarning: state.showLowFpsWarning,\n        canvasOffset: state.canvasOffset,\n    };\n};\n\nexport default connect(mapStateToProps)(MapViewer);\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Button, Container, Input, Card, CardBody, Alert } from 'reactstrap';\nimport MapViewer from './MapViewer';\nimport constants from '../constants';\nimport Utils from '../utils/Utils';\nimport rawMapData from './test.json';\nimport { actionCreators, reduxConstants } from '../redux/actions';\nimport { connect } from 'react-redux';\nimport MapDataHandler from '../utils/MapDataHandler';\n\nfunction MapBuilder({\n    dispatch,\n    curMode,\n    curBuildPointerType,\n    selectedComponent,\n    hoveredComponent,\n}) {\n    const prevSavedMapData = useRef(\n        JSON.parse(localStorage.getItem('saved-map-data')) || rawMapData\n    );\n    const curPointerComponentId = useRef(null);\n    const [roadStartWaypointId, setRoadStartWaypointId] = useState(null);\n    const [roadType, setRoadType] = useState(null);\n\n    useEffect(() => {\n        console.log(curMode);\n        MapDataHandler.updateMapData(prevSavedMapData.current);\n    }, [curMode]);\n\n    const keyDownHandler = (event) => {\n        if (event.key === 'Escape') {\n            dispatch(\n                actionCreators.setCurBuildPointerType(\n                    reduxConstants.BUILD_POINTER_TYPE.NONE\n                )\n            );\n            curPointerComponentId.current = null;\n        }\n    };\n\n    useEffect(() => {\n        window.addEventListener('keydown', keyDownHandler);\n        return () => {\n            window.removeEventListener('keydown', keyDownHandler);\n        };\n    }, []);\n\n    const mouseMoveHandler = (mapCoordinates) => {\n        if (\n            curBuildPointerType ===\n            reduxConstants.BUILD_POINTER_TYPE.INTERSECTION\n        ) {\n            let nextIntersectionId = curPointerComponentId.current;\n            if (\n                !nextIntersectionId ||\n                !nextIntersectionId.includes('intersection')\n            ) {\n                nextIntersectionId = `intersection_${Utils.generateShortUuid()}`;\n            }\n            curPointerComponentId.current = nextIntersectionId;\n            const newMapData = {\n                ...MapDataHandler.mapData,\n                intersections: {\n                    ...MapDataHandler.mapData.intersections,\n                    [nextIntersectionId]: {\n                        ...MapDataHandler.mapData.intersections[\n                            nextIntersectionId\n                        ],\n                        id: nextIntersectionId,\n                        coord: mapCoordinates,\n                    },\n                },\n            };\n            MapDataHandler.updateMapData(newMapData);\n        } else if (\n            curBuildPointerType === reduxConstants.BUILD_POINTER_TYPE.LOCATION\n        ) {\n            let nextLocationId = curPointerComponentId.current;\n            let nextLocationName = null;\n            let newLocation = false;\n\n            if (!nextLocationId || !nextLocationId.includes('location')) {\n                nextLocationId = `location_${Utils.generateShortUuid()}`;\n                nextLocationName = constants.getUniqueLocationName();\n                newLocation = true;\n            }\n            curPointerComponentId.current = nextLocationId;\n\n            const newMapData = {\n                ...MapDataHandler.mapData,\n                locations: {\n                    ...MapDataHandler.mapData.locations,\n                    [nextLocationId]: {\n                        ...MapDataHandler.mapData.locations[nextLocationId],\n                        coord: mapCoordinates,\n                    },\n                },\n            };\n\n            if (newLocation) {\n                newMapData.locations[nextLocationId].id = nextLocationId;\n                newMapData.locations[nextLocationId].name = nextLocationName;\n            }\n\n            MapDataHandler.updateMapData(newMapData);\n        } else {\n            MapDataHandler.updateMapData(prevSavedMapData.current);\n            curPointerComponentId.current = null;\n        }\n    };\n\n    const mouseDownHandler = (mapCoordinates, eventButton) => {\n        if (eventButton === 0) {\n            if (\n                curBuildPointerType ===\n                    reduxConstants.BUILD_POINTER_TYPE.INTERSECTION ||\n                curBuildPointerType ===\n                    reduxConstants.BUILD_POINTER_TYPE.LOCATION\n            ) {\n                if (!hoveredComponent) {\n                    prevSavedMapData.current = MapDataHandler.mapData;\n                    curPointerComponentId.current = null;\n                }\n            } else if (\n                curBuildPointerType.includes(reduxConstants.BUILD_POINTER_TYPE.ROAD_SUFFIX)\n            ) {\n                if (hoveredComponent) {\n                    if (!roadStartWaypointId) {\n                        // road start point\n                        setRoadStartWaypointId(hoveredComponent.id);\n                    } else {\n                        // road end point\n                        const nextRoadId = `road_${Utils.generateShortUuid()}`;\n\n                        const newMapData = {\n                            ...prevSavedMapData.current,\n                            roads: {\n                                ...prevSavedMapData.current.roads,\n                                [nextRoadId]: {\n                                    id: nextRoadId,\n                                    type: roadType,\n                                    start: roadStartWaypointId,\n                                    end: hoveredComponent.id,\n                                },\n                            },\n                        };\n                        prevSavedMapData.current = newMapData;\n                        MapDataHandler.updateMapData(newMapData);\n                        setRoadStartWaypointId(hoveredComponent.id);\n                    }\n                }\n            } else if (\n                curBuildPointerType === reduxConstants.BUILD_POINTER_TYPE.DELETE\n            ) {\n                if (hoveredComponent) {\n                    deleteComponent(hoveredComponent);\n                }\n            }\n        } else if (eventButton === 2) {\n            buildActionHandler(reduxConstants.BUILD_ACTIONS.RESET_POINTER);\n        }\n    };\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            localStorage.setItem(\n                'saved-map-data',\n                JSON.stringify(getSerializedMap())\n            );\n        }, 5000);\n        return () => {\n            clearInterval(interval);\n        };\n    }, []);\n\n    const getSerializedMap = () => {\n        const serializedMap = {\n            id: `map_${Utils.generateShortUuid()}`,\n            locations: prevSavedMapData.current.locations,\n            intersections: prevSavedMapData.current.intersections,\n            vehicles: {},\n            roads: prevSavedMapData.current.roads,\n        };\n        return serializedMap;\n    };\n\n    const saveMap = () => {\n        const serializedMap = getSerializedMap();\n        const dataExportStr =\n            'data:text/json;charset=utf-8,' +\n            encodeURIComponent(JSON.stringify(serializedMap));\n        const downloadAnchorNode = document.createElement('a');\n        downloadAnchorNode.setAttribute('href', dataExportStr);\n        downloadAnchorNode.setAttribute('download', serializedMap.id + '.json');\n        document.body.appendChild(downloadAnchorNode);\n        downloadAnchorNode.click();\n        downloadAnchorNode.remove();\n    };\n\n    const deleteComponent = (deleteComponent) => {\n        if (deleteComponent && deleteComponent.id) {\n            const newMapData = JSON.parse(\n                JSON.stringify(prevSavedMapData.current)\n            );\n\n            if (newMapData.intersections[deleteComponent.id]) {\n                delete newMapData.intersections[deleteComponent.id];\n            }\n\n            if (newMapData.locations[deleteComponent.id]) {\n                delete newMapData.locations[deleteComponent.id];\n            }\n\n            for (const roadId of Object.keys(prevSavedMapData.current.roads)) {\n                if (\n                    prevSavedMapData.current.roads[roadId].start ===\n                        deleteComponent.id ||\n                    prevSavedMapData.current.roads[roadId].end ===\n                        deleteComponent.id\n                ) {\n                    delete newMapData.roads[roadId];\n                }\n            }\n\n            prevSavedMapData.current = newMapData;\n            curPointerComponentId.current = null;\n            MapDataHandler.updateMapData(newMapData);\n        }\n    };\n\n    let curPointerRadius = 0;\n    if (curBuildPointerType === reduxConstants.BUILD_POINTER_TYPE.LOCATION) {\n        curPointerRadius = constants.DISPLAY.LOCATION_RADIUS;\n    } else if (\n        curBuildPointerType === reduxConstants.BUILD_POINTER_TYPE.INTERSECTION\n    ) {\n        curPointerRadius = constants.DISPLAY.INTERSECTION_RADIUS;\n    }\n\n    let cursorStyle = null;\n    if (\n        curBuildPointerType.includes(reduxConstants.BUILD_POINTER_TYPE.ROAD_SUFFIX) &&\n        roadStartWaypointId\n    ) {\n        cursorStyle = 'crosshair';\n    } else if (\n        curBuildPointerType === reduxConstants.BUILD_POINTER_TYPE.DELETE\n    ) {\n        cursorStyle = 'no-drop';\n    }\n\n    const buildActionHandler = (buildAction) => {\n        switch (buildAction) {\n            case reduxConstants.BUILD_ACTIONS.ADD_LOCATION: {\n                MapDataHandler.updateMapData(prevSavedMapData.current);\n                dispatch(\n                    actionCreators.setCurBuildPointerType(\n                        reduxConstants.BUILD_POINTER_TYPE.LOCATION\n                    )\n                );\n                curPointerComponentId.current = null;\n                break;\n            }\n            case reduxConstants.BUILD_ACTIONS.ADD_INTERSECTION: {\n                MapDataHandler.updateMapData(prevSavedMapData.current);\n                dispatch(\n                    actionCreators.setCurBuildPointerType(\n                        reduxConstants.BUILD_POINTER_TYPE.INTERSECTION\n                    )\n                );\n                curPointerComponentId.current = null;\n                break;\n            }\n            case reduxConstants.BUILD_ACTIONS.BUILD_MAJOR_ROAD: {\n                MapDataHandler.updateMapData(prevSavedMapData.current);\n                dispatch(\n                    actionCreators.setCurBuildPointerType(\n                        reduxConstants.BUILD_POINTER_TYPE.MAJOR_ROAD\n                    )\n                );\n                setRoadType(constants.ROAD_TYPES.TYPES.MAJOR);\n                break;\n            }\n            case reduxConstants.BUILD_ACTIONS.BUILD_MINOR_ROAD: {\n                MapDataHandler.updateMapData(prevSavedMapData.current);\n                dispatch(\n                    actionCreators.setCurBuildPointerType(\n                        reduxConstants.BUILD_POINTER_TYPE.MINOR_ROAD\n                    )\n                );\n                setRoadType(constants.ROAD_TYPES.TYPES.MINOR);\n                break;\n            }\n            case reduxConstants.BUILD_ACTIONS.BUILD_LOCAL_ROAD: {\n                MapDataHandler.updateMapData(prevSavedMapData.current);\n                dispatch(\n                    actionCreators.setCurBuildPointerType(\n                        reduxConstants.BUILD_POINTER_TYPE.LOCAL_ROAD\n                    )\n                );\n                setRoadType(constants.ROAD_TYPES.TYPES.LOCAL);\n                break;\n            }\n            case reduxConstants.BUILD_ACTIONS.DELETE_COMPONENTS: {\n                MapDataHandler.updateMapData(prevSavedMapData.current);\n                dispatch(\n                    actionCreators.setCurBuildPointerType(\n                        reduxConstants.BUILD_POINTER_TYPE.DELETE\n                    )\n                );\n                curPointerComponentId.current = null;\n                break;\n            }\n            case reduxConstants.BUILD_ACTIONS.RESET_POINTER: {\n                setRoadStartWaypointId(null);\n                MapDataHandler.updateMapData(prevSavedMapData.current);\n                dispatch(\n                    actionCreators.setCurBuildPointerType(\n                        reduxConstants.BUILD_POINTER_TYPE.NONE\n                    )\n                );\n                curPointerComponentId.current = null;\n                break;\n            }\n            case reduxConstants.BUILD_ACTIONS.SAVE_MAP: {\n                saveMap();\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    const updateLocationName = (locationId, newLocationName) => {\n        MapDataHandler.mapData.locations[locationId].name = newLocationName;\n        prevSavedMapData.current = MapDataHandler.mapData;\n    };\n\n    return (\n        <div className=\"mt-1\">\n            <div>\n                <MapViewer\n                    onMouseMove={mouseMoveHandler}\n                    onMouseDown={mouseDownHandler}\n                    curPointerRadius={curPointerRadius}\n                    curPointerComponentId={curPointerComponentId.current}\n                    cursorStyle={cursorStyle}\n                    buildActionHandler={buildActionHandler}\n                    updateLocationName={updateLocationName}\n                />\n            </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        curMode: state.curMode,\n        selectedComponent: state.selectedComponent,\n        hoveredComponent: state.hoveredComponent,\n        curBuildPointerType: state.curBuildPointerType,\n    };\n};\n\nexport default connect(mapStateToProps)(MapBuilder);\n","import React, { useEffect, useState, useRef } from 'react';\nimport MapBuilder from './components/MapBuilder';\nimport MapViewer from './components/MapViewer';\nimport { connect } from 'react-redux';\nimport { actionCreators, actionTypes, reduxConstants } from './redux/actions';\nimport MapDataHandler from './utils/MapDataHandler';\n\nfunction App({ socket, curMode, dispatch }) {\n    useEffect(() => {\n        MapDataHandler.init(socket);\n        return () => {\n            MapDataHandler.cleanup(socket);\n            socket.disconnect();\n        };\n    }, []);\n\n    let Content;\n    if (curMode === reduxConstants.APP_MODE_LIST.VIEW_MAP) {\n        Content = <MapViewer socket={socket} />;\n    } else if (curMode === reduxConstants.APP_MODE_LIST.CREATE_MAP) {\n        Content = <MapBuilder />;\n    }\n\n    return <div className=\"App\">{Content}</div>;\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        curMode: state.curMode,\n    };\n};\n\nexport default connect(mapStateToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport io from 'socket.io-client';\nimport { Provider } from 'react-redux';\nimport { configureStore } from './redux/store';\n\nlet socketUrl = 'http://localhost:3001';\nif (process.env.NODE_ENV === 'production') {\n    socketUrl = 'https://auto-drive-simulator-api.herokuapp.com/';\n}\nconst socket = io(socketUrl);\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={configureStore()}>\n            <App socket={socket} />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}